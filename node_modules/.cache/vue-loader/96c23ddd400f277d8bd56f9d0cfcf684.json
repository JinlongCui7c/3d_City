{"remainingRequest":"E:\\图形开发\\Projects\\3d_City\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\图形开发\\Projects\\3d_City\\src\\components\\scene.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\图形开发\\Projects\\3d_City\\src\\components\\scene.vue","mtime":1690034384738},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680804470900},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\babel-loader\\lib\\index.js","mtime":1680804470891},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680804470900},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\vue-loader\\lib\\index.js","mtime":1680804488154}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIFRIUkVFIGZyb20gInRocmVlIjsKaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gInRocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzIjsKaW1wb3J0IHsgR0xURkxvYWRlciB9IGZyb20gInRocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0dMVEZMb2FkZXIiOwppbXBvcnQgV2FsbCBmcm9tICIuL2pzL1dhbGwiOwppbXBvcnQgUnVuUmluZyBmcm9tICIuL2pzL1J1blJpbmciOwppbXBvcnQgUnVuTGluZSBmcm9tICIuL2pzL1J1bkxpbmUiOwpsZXQgc2NlbmU7IC8v5Zy65pmvCmxldCBjYW1lcmE7IC8v55u45py6CmxldCByZW5kZXJlcjsgLy/liJvlu7rmuLLmn5PlmagKLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCmxldCBjb250cm9sczsgLy/mjqfliLblmagKbGV0IHBpY2tpbmdTY2VuZSwgcGlja2luZ1RleHR1cmU7IC8v56a75bGP5riy5p+TCgpleHBvcnQgZGVmYXVsdCB7CiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdCgpOwogICAgdGhpcy5jcmVhdGVDb250cm9scygpOwogICAgdGhpcy5hZGRHTFRGKCk7CiAgICB0aGlzLnJlbmRlcigpOwogICAgdGhpcy5jcmVhdFdhbGwoKTsKICAgIC8vIHRoaXMuY3JlYXRSaW5nKCk7CiAgICB0aGlzLmNyZWF0UnVuTGluZSgpOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgdGhpcy5vbkRvY3VtZW50TW91c2VEb3duKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIC8v5Yib5bu65Zy65pmvCiAgICAgIHNjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7CiAgICAgIC8v5aSp56m655uSCgogICAgICBjb25zdCB0ZXh0dXJlQ3ViZSA9IG5ldyBUSFJFRS5DdWJlVGV4dHVyZUxvYWRlcigpLmxvYWQoWwogICAgICAgICJsZWZ0LmpwZyIsCiAgICAgICAgInJpZ2h0LmpwZyIsCiAgICAgICAgInRvcC5qcGciLAogICAgICAgICJkb3duLmpwZyIsCiAgICAgICAgImZyb250LmpwZyIsCiAgICAgICAgImJhY2suanBnIiwKICAgICAgXSk7CiAgICAgIHNjZW5lLmJhY2tncm91bmQgPSB0ZXh0dXJlQ3ViZTsgLy8g5L2c5Li66IOM5pmv6LS05Zu+CiAgICAgIC8qKgogICAgICAgKiDpgI/op4bmipXlvbHnm7jmnLrorr7nva4KICAgICAgICovCiAgICAgIGNvbnN0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7IC8vIOeql+WPo+WuveW6pgogICAgICBjb25zdCBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7IC8vIOeql+WPo+mrmOW6pgoKICAgICAgLyoqIOmAj+inhuaKleW9seebuOacuuWvueixoSAqLwogICAgICBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNjAsIHdpZHRoIC8gaGVpZ2h0LCAxLCAxMDAwMDApOwogICAgICBjYW1lcmEucG9zaXRpb24uc2V0KDYwMCwgOTAwLCA2MDApOyAvLyDmoJHkuIrpnaLop4Llr58KICAgICAgY2FtZXJhLmxvb2tBdChzY2VuZS5wb3NpdGlvbik7IC8vIOiuvue9ruebuOacuuaWueWQkSjmjIflkJHnmoTlnLrmma/lr7nosaEpCiAgICAgIC8vIOWIm+W7uua4suafk+WZqOWvueixoQogICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2NlbmUiKTsKICAgICAgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhczogdHJ1ZSB9KTsKICAgICAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXIuY2xpZW50V2lkdGgsIGNvbnRhaW5lci5jbGllbnRIZWlnaHQpOyAvLyDorr7nva7muLLmn5PljLrln5/lsLrlr7gKICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpOyAvLyBib2R55YWD57Sg5Lit5o+S5YWlY2FudmFz5a+56LGhCgogICAgICAvL+WIm+W7uueCueWFiea6kOWSjOeOr+Wig+WFiea6kAogICAgICBjb25zdCBwb2ludCA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ZmZmZmZmKTsKICAgICAgcG9pbnQucG9zaXRpb24uc2V0KDYwMCwgOTAwLCA2MDApOyAvLyDngrnlhYnmupDkvY3nva4KICAgICAgc2NlbmUuYWRkKHBvaW50KTsgLy8g54K55YWJ5rqQ5re75Yqg5Yiw5Zy65pmv5LitCiAgICAgIC8vIOeOr+Wig+WFiQogICAgICBjb25zdCBhbWJpZW50ID0gbmV3IFRIUkVFLkFtYmllbnRMaWdodCgweDQwNDA0MCwgMSk7CiAgICAgIHNjZW5lLmFkZChhbWJpZW50KTsKICAgICAgcGlja2luZ1NjZW5lID0gbmV3IFRIUkVFLlNjZW5lKCk7IC8v56a75bGP5riy5p+TCiAgICAgIHBpY2tpbmdUZXh0dXJlID0gbmV3IFRIUkVFLldlYkdMUmVuZGVyVGFyZ2V0KDEsIDEpOyAvL+emu+Wxj+a4suafkwogICAgfSwKICAgIGNyZWF0ZUNvbnRyb2xzKCkgewogICAgICBjb250cm9scyA9IG5ldyBPcmJpdENvbnRyb2xzKGNhbWVyYSwgcmVuZGVyZXIuZG9tRWxlbWVudCk7CiAgICB9LAogICAgcmVuZGVyKCkgewogICAgICB0aGlzLmNpdHlhbmltYXRlKCk7CiAgICAgIHJlbmRlcmVyLnNldFJlbmRlclRhcmdldChudWxsKTsKICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpOwogICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXIpOyAvLyDor7fmsYLlho3mrKHmiafooYzmuLLmn5Plh73mlbByZW5kZXIKICAgIH0sCiAgICBhZGRHTFRGKCkgewogICAgICBjb25zdCBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpOwogICAgICBsb2FkZXIubG9hZCgic2hhbmdoYWkuZ2x0ZiIsIChnbHRmKSA9PiB7CiAgICAgICAgZ2x0Zi5zY2VuZS50cmF2ZXJzZSgoY2hpbGQpID0+IHsKICAgICAgICAgIC8vIOiuvue9rue6v+ahhuadkOi0qAogICAgICAgICAgaWYgKGNoaWxkLmlzTWVzaCkgewogICAgICAgICAgICAvL+i/meS4quWIpOaWreaooeWei+aYr+alvOaIv+i/mOaYr+WFtuS7liAg5Yqg6L295LiN5ZCM55qE5p2Q6LSoCiAgICAgICAgICAgIGlmIChbIkNJVFlfVU5UUklBTkdVTEFURUQiXS5pbmNsdWRlcyhjaGlsZC5uYW1lKSkgewogICAgICAgICAgICAgIC8vIOaLv+WIsOaooeWei+e6v+ahhueahEdlb21ldHJ5CiAgICAgICAgICAgICAgdGhpcy5zZXRDaXR5TGluZU1hdGVyaWFsKGNoaWxkKTsKICAgICAgICAgICAgICB0aGlzLnNldENpdHlNYXRlcmlhbChjaGlsZCk7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoWyJST0FEUyJdLmluY2x1ZGVzKGNoaWxkLm5hbWUpKSB7CiAgICAgICAgICAgICAgLy/pgZPot68KICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7CiAgICAgICAgICAgICAgICBjb2xvcjogInJnYig0MSw0Niw3NikiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgVEhSRUUuTWVzaChjaGlsZC5nZW9tZXRyeSwgbWF0ZXJpYWwpOwogICAgICAgICAgICAgIG1lc2gucm90YXRlWCgtTWF0aC5QSSAvIDIpOwogICAgICAgICAgICAgIG1lc2gucG9zaXRpb24uc2V0KAogICAgICAgICAgICAgICAgY2hpbGQucG9zaXRpb24ueCwKICAgICAgICAgICAgICAgIGNoaWxkLnBvc2l0aW9uLnksCiAgICAgICAgICAgICAgICBjaGlsZC5wb3NpdGlvbi56CiAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICBzY2VuZS5hZGQobWVzaCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy/lnLDpnaIKICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7CiAgICAgICAgICAgICAgICBjb2xvcjogIiMwNDA5MTIiLAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGNvbnN0IG1lc2ggPSBuZXcgVEhSRUUuTWVzaChjaGlsZC5nZW9tZXRyeSwgbWF0ZXJpYWwpOwogICAgICAgICAgICAgIHNjZW5lLmFkZChtZXNoKTsKICAgICAgICAgICAgICBtZXNoLnJvdGF0ZVgoLU1hdGguUEkgLyAyKTsKICAgICAgICAgICAgICBtZXNoLnBvc2l0aW9uLnNldCgKICAgICAgICAgICAgICAgIGNoaWxkLnBvc2l0aW9uLngsCiAgICAgICAgICAgICAgICBjaGlsZC5wb3NpdGlvbi55LAogICAgICAgICAgICAgICAgY2hpbGQucG9zaXRpb24uegogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIOiuvue9rue6v+ahhuadkOi0qAogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBzZXRDaXR5TWF0ZXJpYWwob2JqZWN0KSB7CiAgICAgIGNvbnN0IHNoYWRlciA9IG5ldyBUSFJFRS5TaGFkZXJNYXRlcmlhbCh7CiAgICAgICAgdW5pZm9ybXM6IHsKICAgICAgICAgIGhlaWdodDogdGhpcy5oZWlnaHQsCiAgICAgICAgICB1Rmxvd0NvbG9yOiB7CiAgICAgICAgICAgIHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoIiM1NTg4YWEiKSwKICAgICAgICAgIH0sCiAgICAgICAgICB1Q2l0eUNvbG9yOiB7CiAgICAgICAgICAgIHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoIiMxQjMwNDUiKSwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB2ZXJ0ZXhTaGFkZXI6IGAKICAgICAgICAgICAgICAgIHZhcnlpbmcgdmVjMyB2UG9zaXRpb247CiAgICAgICAgICAgICAgICB2b2lkIG1haW4oKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICB2UG9zaXRpb24gPSBwb3NpdGlvbjsKICAgICAgICAgICAgICAgICAgZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uTWF0cml4ICogbW9kZWxWaWV3TWF0cml4ICogdmVjNCggcG9zaXRpb24sIDEuMCApOwogICAgICAgICAgICAgICAgfWAsCiAgICAgICAgZnJhZ21lbnRTaGFkZXI6IGAKZmxvYXQgZGlzdGFuY2VUbyh2ZWMyIHNyYyx2ZWMyIGRzdCkKewogICAgZmxvYXQgZHg9c3JjLngtZHN0Lng7CiAgICBmbG9hdCBkeT1zcmMueS1kc3QueTsKICAgIGZsb2F0IGR2PWR4KmR4K2R5KmR5OwogICAgcmV0dXJuIHNxcnQoZHYpOwp9CnZhcnlpbmcgdmVjMyB2UG9zaXRpb247CnVuaWZvcm0gZmxvYXQgaGVpZ2h0Owp1bmlmb3JtIGZsb2F0IHVTdGFydFRpbWU7CnVuaWZvcm0gdmVjMyB1U2l6ZTsKdW5pZm9ybSB2ZWMzIHVGbG93Q29sb3I7CnVuaWZvcm0gdmVjMyB1Q2l0eUNvbG9yOwp2b2lkIG1haW4oKQp7CiAgICAvL+aooeWei+eahOWfuuehgOminOiJsgogICAgdmVjMyBkaXN0Q29sb3I9dUNpdHlDb2xvcjsKICAgIC8vIOa1geWKqOiMg+WbtOW9k+WJjeeCuXrnmoTpq5jluqbliqDkuIrmtYHliqjnur/nmoTpq5jluqYKICAgIGZsb2F0IHRvcFk9dlBvc2l0aW9uLnorMTAuOwogICAgaWYoaGVpZ2h0PnZQb3NpdGlvbi56JiZoZWlnaHQ8dG9wWSl7CiAgICAgICAgLy8g6aKc6Imy5riQ5Y+YCiAgICAgICAgICAgIGZsb2F0IGRJbmRleCA9IHNpbigoaGVpZ2h0IC0gdlBvc2l0aW9uLnopIC8gMTAuMCAqIDMuMTQpOwogICAgICAgICAgICBkaXN0Q29sb3IgPSBtaXgodUZsb3dDb2xvciwgZGlzdENvbG9yLCAxLjAtZEluZGV4KTsKCiAgICB9CiAgICAvL+WumuS9jeW9k+WJjeeCueS9jeS9jee9rgogICAgdmVjMiBwb3NpdGlvbjJEPXZlYzIodlBvc2l0aW9uLngsdlBvc2l0aW9uLnkpOwogICAgLy/msYLngrnliLDljp/ngrnnmoTot53nprsKICAgIGZsb2F0IExlbj1kaXN0YW5jZVRvKHBvc2l0aW9uMkQsdmVjMigwLDApKTsKICAgICAgaWYoTGVuPmhlaWdodCozMC4wJiZMZW48KGhlaWdodCozMC4wKzEzMC4wKSl7CiAgICAgICAgLy8g6aKc6Imy5riQ5Y+YCiAgICAgICAgZmxvYXQgZEluZGV4ID0gc2luKChMZW4gLSBoZWlnaHQqMzAuMCkgLyAxMzAuMCAqIDMuMTQpOwogICAgICAgIGRpc3RDb2xvcj0gbWl4KHVGbG93Q29sb3IsIGRpc3RDb2xvciwgMS4wLWRJbmRleCk7CiAgICB9CiAgICBnbF9GcmFnQ29sb3I9dmVjNChkaXN0Q29sb3IsMS4wKTsKfWAsCiAgICAgICAgdHJhbnNwYXJlbnQ6IHRydWUsCiAgICAgIH0pOwoKICAgICAgY29uc3QgY2l0eSA9IG5ldyBUSFJFRS5NZXNoKG9iamVjdC5nZW9tZXRyeSwgc2hhZGVyKTsKICAgICAgY2l0eS5wb3NpdGlvbi5zZXQoCiAgICAgICAgb2JqZWN0LnBvc2l0aW9uLngsCiAgICAgICAgb2JqZWN0LnBvc2l0aW9uLnksCiAgICAgICAgb2JqZWN0LnBvc2l0aW9uLnoKICAgICAgKTsKICAgICAgc2NlbmUuYWRkKGNpdHkpOwogICAgICAvLyBwaWNraW5nU2NlbmUuYWRkKGNpdHkpOwogICAgICBjaXR5LnJvdGF0ZVgoLU1hdGguUEkgLyAyKTsKICAgIH0sCiAgICBzZXRDaXR5TGluZU1hdGVyaWFsKG9iamVjdCkgewogICAgICBjb25zdCBlZGdlcyA9IG5ldyBUSFJFRS5FZGdlc0dlb21ldHJ5KG9iamVjdC5nZW9tZXRyeSwgMSk7CiAgICAgIC8v6K6+572u5qih5Z6L55qE5p2Q6LSoCiAgICAgIGNvbnN0IGxpbmVNYXRlcmlhbCA9IG5ldyBUSFJFRS5MaW5lQmFzaWNNYXRlcmlhbCh7CiAgICAgICAgLy8g57q/55qE6aKc6ImyCiAgICAgICAgY29sb3I6ICJyZ2JhKDM4LDEzMywyNTQpIiwKICAgICAgfSk7CiAgICAgIC8v5oqK5pWw5o2u57uE5ZCI6LW35p2lCiAgICAgIGNvbnN0IGxpbmVTID0gbmV3IFRIUkVFLkxpbmVTZWdtZW50cyhlZGdlcywgbGluZU1hdGVyaWFsKTsKICAgICAgLy/orr7nva7mlbDmja7nmoTkvY3nva4KICAgICAgbGluZVMucG9zaXRpb24uc2V0KAogICAgICAgIG9iamVjdC5wb3NpdGlvbi54LAogICAgICAgIG9iamVjdC5wb3NpdGlvbi55LAogICAgICAgIG9iamVjdC5wb3NpdGlvbi56CiAgICAgICk7CiAgICAgIC8v5re75Yqg5Yiw5Zy65pmvCiAgICAgIHNjZW5lLmFkZChsaW5lUyk7CgogICAgICBsaW5lUy5yb3RhdGVYKC1NYXRoLlBJIC8gMik7CiAgICB9LAogICAgY2l0eWFuaW1hdGUoKSB7CiAgICAgIHRoaXMuaGVpZ2h0LnZhbHVlICs9IDAuMjsKICAgICAgaWYgKHRoaXMuaGVpZ2h0LnZhbHVlID4gMTAwKSB7CiAgICAgICAgdGhpcy5oZWlnaHQudmFsdWUgPSAwLjA7CiAgICAgIH0KICAgIH0sCiAgICBjcmVhdFdhbGwoKSB7CiAgICAgIGNvbnN0IHdhbGxEYXRhID0gewogICAgICAgIHBvc2l0aW9uOiB7CiAgICAgICAgICB4OiAtMTUwLAogICAgICAgICAgeTogMTUsCiAgICAgICAgICB6OiAxMDAsCiAgICAgICAgfSwKICAgICAgICBzcGVlZDogMC41LAogICAgICAgIGNvbG9yOiAiI2VmYWQzNSIsCiAgICAgICAgb3BhY2l0eTogMC42LAogICAgICAgIHJhZGl1czogNDIwLAogICAgICAgIGhlaWdodDogMTIwLAogICAgICAgIHJlbmRlck9yZGVyOiA1LAogICAgICB9OwoKICAgICAgbGV0IHdhbGxNZXNoID0gbmV3IFdhbGwod2FsbERhdGEpOwogICAgICB3YWxsTWVzaC5tZXNoLm1hdGVyaWFsLnVuaWZvcm1zLnRpbWUgPSB0aGlzLmhlaWdodDsKICAgICAgc2NlbmUuYWRkKHdhbGxNZXNoLm1lc2gpOwogICAgfSwKICAgIGNyZWF0UmluZygpIHsKICAgICAgdGhpcy5SdW5SaW5nMSA9IG5ldyBSdW5SaW5nKHsKICAgICAgICBpbWc6ICJjbGljZS5wbmciLAogICAgICAgIHNjZW5lOiBzY2VuZSwKICAgICAgICBzcGVlZDogMSwKICAgICAgICByYWRpdXM6IDQwMCwKICAgICAgICBwb3NpdGlvbjogWwogICAgICAgICAgWzQwMCwgMjAsIDQwMF0sCiAgICAgICAgICBbMTAwLCAyMCwgMTIwMF0sCiAgICAgICAgXSwKICAgICAgfSk7CiAgICB9LAogICAgY3JlYXRSdW5MaW5lKCkgewogICAgICB0aGlzLnJ1bmxpbmUxID0gbmV3IFJ1bkxpbmUoewogICAgICAgIGltZzogInoxLnBuZyIsCiAgICAgICAgY2FtZXJhOiBjYW1lcmEsCiAgICAgICAgaGVpZ2h0OiAxNDAsCiAgICAgICAgdjA6IG5ldyBUSFJFRS5WZWN0b3IzKDYwLCAxOCwgLTI3OSksCiAgICAgICAgdjE6IG5ldyBUSFJFRS5WZWN0b3IzKC0xNy41LCAxMTEuNSwgLTIzKSwKICAgICAgICBlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNjZW5lIiksCiAgICAgICAgc2NlbmU6IHNjZW5lLAogICAgICAgIHNwZWVkOiAxLAogICAgICAgIGxpbmVXaWR0aDogNDAsCiAgICAgICAgdHlwZTogInJ1biIsCiAgICAgIH0pOwogICAgICB0aGlzLnJ1bmxpbmUyID0gbmV3IFJ1bkxpbmUoewogICAgICAgIGltZzogInpfMTEyLnBuZyIsCiAgICAgICAgY2FtZXJhOiBjYW1lcmEsCiAgICAgICAgaGVpZ2h0OiAxNDAsCiAgICAgICAgdjA6IG5ldyBUSFJFRS5WZWN0b3IzKC0xMTMsIDQ0LCA2NjYpLAogICAgICAgIHYxOiBuZXcgVEhSRUUuVmVjdG9yMygtMTcuNSwgMTExLjUsIC0yMyksCiAgICAgICAgZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzY2VuZSIpLAogICAgICAgIHNjZW5lOiBzY2VuZSwKICAgICAgICBzcGVlZDogMSwKICAgICAgICBsaW5lV2lkdGg6IDQwLAogICAgICAgIHR5cGU6ICJydW4iLAogICAgICB9KTsKICAgICAgdGhpcy5ydW5saW5lMyA9IG5ldyBSdW5MaW5lKHsKICAgICAgICBpbWc6ICJ6XzExLnBuZyIsCiAgICAgICAgY2FtZXJhOiBjYW1lcmEsCiAgICAgICAgaGVpZ2h0OiAxNDAsCiAgICAgICAgdjA6IG5ldyBUSFJFRS5WZWN0b3IzKC00MTgsIDExMywgLTEyKSwKICAgICAgICB2MTogbmV3IFRIUkVFLlZlY3RvcjMoLTE3LjUsIDExMS41LCAtMjMpLAogICAgICAgIGVsOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2NlbmUiKSwKICAgICAgICBzY2VuZTogc2NlbmUsCiAgICAgICAgc3BlZWQ6IDEsCiAgICAgICAgbGluZVdpZHRoOiA0MCwKICAgICAgICB0eXBlOiAicnVuIiwKICAgICAgfSk7CiAgICAgIHRoaXMucnVubGluZTUgPSBuZXcgUnVuTGluZSh7CiAgICAgICAgaW1nOiAibi5wbmciLAogICAgICAgIGNhbWVyYTogY2FtZXJhLAogICAgICAgIGhlaWdodDogMTQwLAogICAgICAgIHYwOiBuZXcgVEhSRUUuVmVjdG9yMyg2MTQsIDE4LCAxMzApLAogICAgICAgIHYxOiBuZXcgVEhSRUUuVmVjdG9yMygtMTcuNSwgMTExLjUsIC0yMyksCiAgICAgICAgZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzY2VuZSIpLAogICAgICAgIHNjZW5lOiBzY2VuZSwKICAgICAgICBzcGVlZDogMSwKICAgICAgICBsaW5lV2lkdGg6IDQwLAogICAgICAgIHR5cGU6ICJydW4iLAogICAgICB9KTsKICAgIH0sCiAgICBvbkRvY3VtZW50TW91c2VEb3duKGV2ZW50KSB7CiAgICAgIHRoaXMuZ3B1Q2xpY2soKTsKICAgICAgdGhpcy5yYXljYXN0Q2xpY2soZXZlbnQpOwogICAgfSwKICAgIHJheWNhc3RDbGljayhldmVudCkgewogICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICBjb25zdCB2ZWN0b3IgPSBuZXcgVEhSRUUuVmVjdG9yMygpOyAvLyDkuInnu7TlnZDmoIflr7nosaEKICAgICAgdmVjdG9yLnNldCgKICAgICAgICAoZXZlbnQuY2xpZW50WCAvIHdpbmRvdy5pbm5lcldpZHRoKSAqIDIgLSAxLAogICAgICAgIC0oZXZlbnQuY2xpZW50WSAvIHdpbmRvdy5pbm5lckhlaWdodCkgKiAyICsgMSwKICAgICAgICAwLjUKICAgICAgKTsKICAgICAgdmVjdG9yLnVucHJvamVjdChjYW1lcmEpOwogICAgICBjb25zdCByYXljYXN0ZXIgPSBuZXcgVEhSRUUuUmF5Y2FzdGVyKAogICAgICAgIGNhbWVyYS5wb3NpdGlvbiwKICAgICAgICB2ZWN0b3Iuc3ViKGNhbWVyYS5wb3NpdGlvbikubm9ybWFsaXplKCkKICAgICAgKTsKICAgICAgY29uc3QgaW50ZXJzZWN0cyA9IHJheWNhc3Rlci5pbnRlcnNlY3RPYmplY3RzKHNjZW5lLmNoaWxkcmVuKTsKICAgICAgaWYgKGludGVyc2VjdHMubGVuZ3RoID4gMCkgewogICAgICAgIGNvbnN0IHNlbGVjdGVkID0gaW50ZXJzZWN0c1swXTsgLy8g5Y+W56ys5LiA5Liq54mp5L2TCiAgICAgICAgY29uc29sZS5sb2coYHjlnZDmoIc6JHtzZWxlY3RlZC5wb2ludC54fWApOwogICAgICAgIGNvbnNvbGUubG9nKGB55Z2Q5qCHOiR7c2VsZWN0ZWQucG9pbnQueX1gKTsKICAgICAgICBjb25zb2xlLmxvZyhgeuWdkOaghzoke3NlbGVjdGVkLnBvaW50Lnp9YCk7CiAgICAgIH0KICAgIH0sCiAgICBncHVDbGljaygpIHsKICAgICAgcmVuZGVyZXIuc2V0UmVuZGVyVGFyZ2V0KHBpY2tpbmdUZXh0dXJlKTsKICAgICAgcmVuZGVyZXIucmVuZGVyKHBpY2tpbmdTY2VuZSwgY2FtZXJhKTsKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGVpZ2h0OiB7CiAgICAgICAgdmFsdWU6IDAsCiAgICAgIH0sCiAgICB9OwogIH0sCn07Cg=="},{"version":3,"sources":["scene.vue"],"names":[],"mappings":";;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scene.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"scene\"></div>\n  <button>按钮1</button>\n  <button>按钮2</button>\n</template>\n<script>\nimport * as THREE from \"three\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport Wall from \"./js/Wall\";\nimport RunRing from \"./js/RunRing\";\nimport RunLine from \"./js/RunLine\";\nlet scene; //场景\nlet camera; //相机\nlet renderer; //创建渲染器\n// eslint-disable-next-line no-unused-vars\nlet controls; //控制器\nlet pickingScene, pickingTexture; //离屏渲染\n\nexport default {\n  mounted() {\n    this.init();\n    this.createControls();\n    this.addGLTF();\n    this.render();\n    this.creatWall();\n    // this.creatRing();\n    this.creatRunLine();\n    window.addEventListener(\"click\", this.onDocumentMouseDown);\n  },\n  methods: {\n    init() {\n      //创建场景\n      scene = new THREE.Scene();\n      //天空盒\n\n      const textureCube = new THREE.CubeTextureLoader().load([\n        \"left.jpg\",\n        \"right.jpg\",\n        \"top.jpg\",\n        \"down.jpg\",\n        \"front.jpg\",\n        \"back.jpg\",\n      ]);\n      scene.background = textureCube; // 作为背景贴图\n      /**\n       * 透视投影相机设置\n       */\n      const width = window.innerWidth; // 窗口宽度\n      const height = window.innerHeight; // 窗口高度\n\n      /** 透视投影相机对象 */\n      camera = new THREE.PerspectiveCamera(60, width / height, 1, 100000);\n      camera.position.set(600, 900, 600); // 树上面观察\n      camera.lookAt(scene.position); // 设置相机方向(指向的场景对象)\n      // 创建渲染器对象\n      const container = document.getElementById(\"scene\");\n      renderer = new THREE.WebGLRenderer({ antialias: true });\n      renderer.setSize(container.clientWidth, container.clientHeight); // 设置渲染区域尺寸\n      container.appendChild(renderer.domElement); // body元素中插入canvas对象\n\n      //创建点光源和环境光源\n      const point = new THREE.PointLight(0xffffff);\n      point.position.set(600, 900, 600); // 点光源位置\n      scene.add(point); // 点光源添加到场景中\n      // 环境光\n      const ambient = new THREE.AmbientLight(0x404040, 1);\n      scene.add(ambient);\n      pickingScene = new THREE.Scene(); //离屏渲染\n      pickingTexture = new THREE.WebGLRenderTarget(1, 1); //离屏渲染\n    },\n    createControls() {\n      controls = new OrbitControls(camera, renderer.domElement);\n    },\n    render() {\n      this.cityanimate();\n      renderer.setRenderTarget(null);\n      renderer.render(scene, camera);\n      requestAnimationFrame(this.render); // 请求再次执行渲染函数render\n    },\n    addGLTF() {\n      const loader = new GLTFLoader();\n      loader.load(\"shanghai.gltf\", (gltf) => {\n        gltf.scene.traverse((child) => {\n          // 设置线框材质\n          if (child.isMesh) {\n            //这个判断模型是楼房还是其他  加载不同的材质\n            if ([\"CITY_UNTRIANGULATED\"].includes(child.name)) {\n              // 拿到模型线框的Geometry\n              this.setCityLineMaterial(child);\n              this.setCityMaterial(child);\n            } else if ([\"ROADS\"].includes(child.name)) {\n              //道路\n              const material = new THREE.MeshBasicMaterial({\n                color: \"rgb(41,46,76)\",\n              });\n              const mesh = new THREE.Mesh(child.geometry, material);\n              mesh.rotateX(-Math.PI / 2);\n              mesh.position.set(\n                child.position.x,\n                child.position.y,\n                child.position.z\n              );\n              scene.add(mesh);\n            } else {\n              //地面\n              const material = new THREE.MeshBasicMaterial({\n                color: \"#040912\",\n              });\n              const mesh = new THREE.Mesh(child.geometry, material);\n              scene.add(mesh);\n              mesh.rotateX(-Math.PI / 2);\n              mesh.position.set(\n                child.position.x,\n                child.position.y,\n                child.position.z\n              );\n            }\n          }\n          // 设置线框材质\n        });\n      });\n    },\n    setCityMaterial(object) {\n      const shader = new THREE.ShaderMaterial({\n        uniforms: {\n          height: this.height,\n          uFlowColor: {\n            value: new THREE.Color(\"#5588aa\"),\n          },\n          uCityColor: {\n            value: new THREE.Color(\"#1B3045\"),\n          },\n        },\n        vertexShader: `\n                varying vec3 vPosition;\n                void main()\n                {\n                  vPosition = position;\n                  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }`,\n        fragmentShader: `\nfloat distanceTo(vec2 src,vec2 dst)\n{\n    float dx=src.x-dst.x;\n    float dy=src.y-dst.y;\n    float dv=dx*dx+dy*dy;\n    return sqrt(dv);\n}\nvarying vec3 vPosition;\nuniform float height;\nuniform float uStartTime;\nuniform vec3 uSize;\nuniform vec3 uFlowColor;\nuniform vec3 uCityColor;\nvoid main()\n{\n    //模型的基础颜色\n    vec3 distColor=uCityColor;\n    // 流动范围当前点z的高度加上流动线的高度\n    float topY=vPosition.z+10.;\n    if(height>vPosition.z&&height<topY){\n        // 颜色渐变\n            float dIndex = sin((height - vPosition.z) / 10.0 * 3.14);\n            distColor = mix(uFlowColor, distColor, 1.0-dIndex);\n\n    }\n    //定位当前点位位置\n    vec2 position2D=vec2(vPosition.x,vPosition.y);\n    //求点到原点的距离\n    float Len=distanceTo(position2D,vec2(0,0));\n      if(Len>height*30.0&&Len<(height*30.0+130.0)){\n        // 颜色渐变\n        float dIndex = sin((Len - height*30.0) / 130.0 * 3.14);\n        distColor= mix(uFlowColor, distColor, 1.0-dIndex);\n    }\n    gl_FragColor=vec4(distColor,1.0);\n}`,\n        transparent: true,\n      });\n\n      const city = new THREE.Mesh(object.geometry, shader);\n      city.position.set(\n        object.position.x,\n        object.position.y,\n        object.position.z\n      );\n      scene.add(city);\n      // pickingScene.add(city);\n      city.rotateX(-Math.PI / 2);\n    },\n    setCityLineMaterial(object) {\n      const edges = new THREE.EdgesGeometry(object.geometry, 1);\n      //设置模型的材质\n      const lineMaterial = new THREE.LineBasicMaterial({\n        // 线的颜色\n        color: \"rgba(38,133,254)\",\n      });\n      //把数据组合起来\n      const lineS = new THREE.LineSegments(edges, lineMaterial);\n      //设置数据的位置\n      lineS.position.set(\n        object.position.x,\n        object.position.y,\n        object.position.z\n      );\n      //添加到场景\n      scene.add(lineS);\n\n      lineS.rotateX(-Math.PI / 2);\n    },\n    cityanimate() {\n      this.height.value += 0.2;\n      if (this.height.value > 100) {\n        this.height.value = 0.0;\n      }\n    },\n    creatWall() {\n      const wallData = {\n        position: {\n          x: -150,\n          y: 15,\n          z: 100,\n        },\n        speed: 0.5,\n        color: \"#efad35\",\n        opacity: 0.6,\n        radius: 420,\n        height: 120,\n        renderOrder: 5,\n      };\n\n      let wallMesh = new Wall(wallData);\n      wallMesh.mesh.material.uniforms.time = this.height;\n      scene.add(wallMesh.mesh);\n    },\n    creatRing() {\n      this.RunRing1 = new RunRing({\n        img: \"clice.png\",\n        scene: scene,\n        speed: 1,\n        radius: 400,\n        position: [\n          [400, 20, 400],\n          [100, 20, 1200],\n        ],\n      });\n    },\n    creatRunLine() {\n      this.runline1 = new RunLine({\n        img: \"z1.png\",\n        camera: camera,\n        height: 140,\n        v0: new THREE.Vector3(60, 18, -279),\n        v1: new THREE.Vector3(-17.5, 111.5, -23),\n        el: document.getElementById(\"scene\"),\n        scene: scene,\n        speed: 1,\n        lineWidth: 40,\n        type: \"run\",\n      });\n      this.runline2 = new RunLine({\n        img: \"z_112.png\",\n        camera: camera,\n        height: 140,\n        v0: new THREE.Vector3(-113, 44, 666),\n        v1: new THREE.Vector3(-17.5, 111.5, -23),\n        el: document.getElementById(\"scene\"),\n        scene: scene,\n        speed: 1,\n        lineWidth: 40,\n        type: \"run\",\n      });\n      this.runline3 = new RunLine({\n        img: \"z_11.png\",\n        camera: camera,\n        height: 140,\n        v0: new THREE.Vector3(-418, 113, -12),\n        v1: new THREE.Vector3(-17.5, 111.5, -23),\n        el: document.getElementById(\"scene\"),\n        scene: scene,\n        speed: 1,\n        lineWidth: 40,\n        type: \"run\",\n      });\n      this.runline5 = new RunLine({\n        img: \"n.png\",\n        camera: camera,\n        height: 140,\n        v0: new THREE.Vector3(614, 18, 130),\n        v1: new THREE.Vector3(-17.5, 111.5, -23),\n        el: document.getElementById(\"scene\"),\n        scene: scene,\n        speed: 1,\n        lineWidth: 40,\n        type: \"run\",\n      });\n    },\n    onDocumentMouseDown(event) {\n      this.gpuClick();\n      this.raycastClick(event);\n    },\n    raycastClick(event) {\n      event.preventDefault();\n      const vector = new THREE.Vector3(); // 三维坐标对象\n      vector.set(\n        (event.clientX / window.innerWidth) * 2 - 1,\n        -(event.clientY / window.innerHeight) * 2 + 1,\n        0.5\n      );\n      vector.unproject(camera);\n      const raycaster = new THREE.Raycaster(\n        camera.position,\n        vector.sub(camera.position).normalize()\n      );\n      const intersects = raycaster.intersectObjects(scene.children);\n      if (intersects.length > 0) {\n        const selected = intersects[0]; // 取第一个物体\n        console.log(`x坐标:${selected.point.x}`);\n        console.log(`y坐标:${selected.point.y}`);\n        console.log(`z坐标:${selected.point.z}`);\n      }\n    },\n    gpuClick() {\n      renderer.setRenderTarget(pickingTexture);\n      renderer.render(pickingScene, camera);\n    },\n  },\n  data() {\n    return {\n      height: {\n        value: 0,\n      },\n    };\n  },\n};\n</script>\n<style scoped>\nhtml,\nbody,\n#scene {\n  width: 100vw;\n  height: 100vh;\n  z-index: 2;\n  position: absolute;\n  top: 0%;\n}\n</style>\n"]}]}