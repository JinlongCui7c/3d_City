{"remainingRequest":"E:\\图形开发\\Projects\\3d_City\\node_modules\\babel-loader\\lib\\index.js!E:\\图形开发\\Projects\\3d_City\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\图形开发\\Projects\\3d_City\\src\\components\\js\\RunLine.js","dependencies":[{"path":"E:\\图形开发\\Projects\\3d_City\\src\\components\\js\\RunLine.js","mtime":1647503769000},{"path":"E:\\图形开发\\Projects\\3d_City\\babel.config.js","mtime":1647503769000},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680804470900},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\babel-loader\\lib\\index.js","mtime":1680804470891},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\eslint-loader\\index.js","mtime":1680804481602}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJFOlxcXHU1NkZFXHU1RjYyXHU1RjAwXHU1M0QxXFxQcm9qZWN0c1xcM2RfQ2l0eVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkU6XFxcdTU2RkVcdTVGNjJcdTVGMDBcdTUzRDFcXFByb2plY3RzXFwzZF9DaXR5XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CmltcG9ydCAqIGFzIFRIUkVFIGZyb20gInRocmVlIjsKaW1wb3J0IHsgTWVzaExpbmUsIE1lc2hMaW5lTWF0ZXJpYWwgfSBmcm9tICIuL1RIUkVFLk1lc2hMaW5lIjsKaW1wb3J0IHsgR2VvbWV0cnkgfSBmcm9tICJ0aHJlZS9leGFtcGxlcy9qc20vZGVwcmVjYXRlZC9HZW9tZXRyeSI7ClRIUkVFLkdlb21ldHJ5ID0gR2VvbWV0cnk7Ci8qKgogKiDms6LnurnmlaPlsITlm77lsYIKICogQHBhcmFtICBvcHRpb25zLmltZyDnhafniYflnLDlnYAKICogQHBhcmFtICBvcHRpb25zLmxpbmVXaWR0aCDnur/lrr3luqYKICogQHBhcmFtICBvcHRpb25zLnNpZGUg6LS05Zu+5qC35byPCiAqIEBwYXJhbSAgb3B0aW9ucy5jYW1lcmEg55u45py6CiAqIEBwYXJhbSAgb3B0aW9ucy5oZWlnaHQg6auY5bqmCiAqIEBwYXJhbSAgb3B0aW9ucy52MCDngrnkuIAKICogQHBhcmFtICBvcHRpb25zLnYxIOeCueS6jAogKiBAcGFyYW0gIG9wdGlvbnMuc3BlZWQg5rWB5Yqo6YCf5bqmCiAqIEBwYXJhbSAgb3B0aW9ucy5lbCDoioLnm67lnLrmma/lhYPntKAKICogQHBhcmFtICBvcHRpb25zLnR5cGUg57q/57G75Z6L5YiGcnVu5ZKMdG9wCiAqIEBwYXJhbSAgb3B0aW9ucy5tYXhoZWlnaHQg5b2T57G75Z6L5Li6dG9w5pe25pyA6auY5LiK5Y2H6auY5bqmCiAqIEBwYXJhbSAgb3B0aW9ucy5saW5lIOWtmOWCqOe6vwogKiBAcGFyYW0gIG9wdGlvbnMudGhpbmcg5a2Y5YKoc2V0SW50ZXJ2YWzkuovku7YKICogQGV4YW1wbGUKICovCgp2YXIgUnVuTGluZSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUnVuTGluZShvcHRpb24pIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSdW5MaW5lKTsKCiAgICB0aGlzLmltZyA9IG9wdGlvbi5pbWcgfHwgIiI7CiAgICB0aGlzLmxpbmVXaWR0aCA9IG9wdGlvbi5saW5lV2lkdGggfHwgMTsKICAgIHRoaXMuc2lkZSA9IG9wdGlvbi5zaWRlIHx8IFRIUkVFLkZyb250U2lkZTsKICAgIHRoaXMuY2FtZXJhID0gb3B0aW9uLmNhbWVyYSB8fCAiIjsKICAgIHRoaXMuaGVpZ2h0ID0gb3B0aW9uLmhlaWdodCB8fCAxMDA7CiAgICB0aGlzLnYwID0gb3B0aW9uLnYwIHx8IG5ldyBUSFJFRS5WZWN0b3IzKDAsIDAsIDApOwogICAgdGhpcy52MSA9IG9wdGlvbi52MSB8fCBuZXcgVEhSRUUuVmVjdG9yMygwLCAwLCAwKTsKICAgIHRoaXMuc3BlZWQgPSBvcHRpb24uc3BlZWQgLyAxMDAgfHwgMC4wMTsKICAgIHRoaXMuZWwgPSBvcHRpb24uZWwgfHwgIiI7CiAgICB0aGlzLnNjZW5lID0gb3B0aW9uLnNjZW5lIHx8ICIiOwogICAgdGhpcy50eXBlID0gb3B0aW9uLnR5cGUgfHwgInJ1biI7CiAgICB0aGlzLm1heGhlaWdodCA9IG9wdGlvbi5tYXhoZWlnaHQgfHwgMzAwOwogICAgdGhpcy5saW5lID0gIiI7CiAgICB0aGlzLnRoaW5nID0gIiI7CiAgICB0aGlzLmNyZWF0bGluZSgpOwogIH0KCiAgX2NyZWF0ZUNsYXNzKFJ1bkxpbmUsIFt7CiAgICBrZXk6ICJjcmVhdGxpbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0bGluZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB0ZXh0dXJlTG9hZGVyID0gbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKTsKICAgICAgdGV4dHVyZUxvYWRlci5sb2FkKHRoaXMuaW1nLCBmdW5jdGlvbiAodGV4dHVyZSkgewogICAgICAgIF90aGlzLnRleHR1cmUgPSB0ZXh0dXJlOwogICAgICAgIF90aGlzLnRleHR1cmUuYW5pc290cm9weSA9IDE2OwogICAgICAgIF90aGlzLnRleHR1cmUud3JhcFMgPSBUSFJFRS5SZXBlYXRXcmFwcGluZzsgLy8g5q+P5Liq6YO96YeN5aSNCgogICAgICAgIF90aGlzLnRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZzsKICAgICAgICB2YXIgcmVzb2x1dGlvbiA9IG5ldyBUSFJFRS5WZWN0b3IyKF90aGlzLmVsLm9mZnNldFdpZHRoLCBfdGhpcy5lbC5vZmZzZXRIZWlnaHQpOwogICAgICAgIHZhciBtYXRlcmlhbDEgPSBuZXcgTWVzaExpbmVNYXRlcmlhbCh7CiAgICAgICAgICBjb2xvcjogIiIsCiAgICAgICAgICBtYXA6IF90aGlzLnRleHR1cmUsCiAgICAgICAgICB1c2VNYXA6IHRydWUsCiAgICAgICAgICBsaW5lV2lkdGg6IF90aGlzLmxpbmVXaWR0aCwKICAgICAgICAgIHJlc29sdXRpb246IHJlc29sdXRpb24sCiAgICAgICAgICBkYXNoQXJyYXk6IDAsCiAgICAgICAgICAvLyDnoLTmipjlj7fkuYvpl7TnmoTplb/luqblkozpl7Tot53jgIIoMCAt5peg56C05oqY5Y+3KQogICAgICAgICAgZGFzaFJhdGlvOiAwLjcsCiAgICAgICAgICAvLyDlrprkuYnlj6/op4HlkozkuI3lj6/op4HkuYvpl7TnmoTmr5TnjocoMCAt5pu05Y+v6KeB77yMMSAt5pu05LiN5Y+v6KeBKeOAggogICAgICAgICAgZGFzaE9mZnNldDogMSwKICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLAogICAgICAgICAgc2l6ZUF0dGVudWF0aW9uOiAxLAogICAgICAgICAgLy8g5L2/57q/5a695LiN5Y+Y77yM5LiN566h6Led56a7KDHkuKrljZXkvY3mmK/lsY/luZXkuIrnmoQxcHgpKDAgLeihsOWHj++8jDEgLeS4jeihsOWHjykKICAgICAgICAgIHNpZGU6IFRIUkVFLkZyb250U2lkZSwKICAgICAgICAgIGRlcHRoVGVzdDogZmFsc2UsCiAgICAgICAgICBibGVuZGluZzogVEhSRUUuQWRkaXRpdmVCbGVuZGluZywKICAgICAgICAgIG5lYXI6IF90aGlzLmNhbWVyYS5uZWFyLAogICAgICAgICAgZmFyOiBfdGhpcy5jYW1lcmEuZmFyCiAgICAgICAgfSk7CiAgICAgICAgX3RoaXMubGluZSA9IF90aGlzLmNyZWF0ZUFuaW1hdGVMaW5lKHsKICAgICAgICAgIGtpbmQ6ICJzcGhlcmUiLAogICAgICAgICAgLy8g6buY6K6k5LiN5aGrIOS4uuaZrumAmiA7IOWmguS4unNwaGVyZSzliJnooajnpLrnkIPpnaLlu7rngrkKICAgICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAgIC8vIOm7mOiupOS4jeWhqyDkuLpNZXNoTGluZSA7IOWmguS4unBpcGUs5YiZ6KGo56S6566h6YGT57q/CiAgICAgICAgICBzcGhlcmVIZWlnaHRQb2ludHNBcmdzOiBbX3RoaXMudjAsIF90aGlzLnYxXSwKICAgICAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbDEsCiAgICAgICAgICBudW1iZXI6IDUwLAogICAgICAgICAgcmFkaXVzOiAzIC8vIOm7mOiupAoKICAgICAgICB9KTsKCiAgICAgICAgaWYgKF90aGlzLnR5cGUgPT09ICJydW4iKSB7CiAgICAgICAgICBfdGhpcy5saW5lMSA9IF90aGlzLmNyZWF0ZUFuaW1hdGVMaW5lKHsKICAgICAgICAgICAga2luZDogInNwaGVyZSIsCiAgICAgICAgICAgIC8vIOm7mOiupOS4jeWhqyDkuLrmma7pgJogOyDlpoLkuLpzcGhlcmUs5YiZ6KGo56S655CD6Z2i5bu654K5CiAgICAgICAgICAgIHR5cGU6ICJsaW5lIiwKICAgICAgICAgICAgLy8g6buY6K6k5LiN5aGrIOS4uk1lc2hMaW5lIDsg5aaC5Li6cGlwZSzliJnooajnpLrnrqHpgZPnur8KICAgICAgICAgICAgc3BoZXJlSGVpZ2h0UG9pbnRzQXJnczogW190aGlzLnYwLCBfdGhpcy52MV0sCiAgICAgICAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbDEsCiAgICAgICAgICAgIG51bWJlcjogNTAsCiAgICAgICAgICAgIHJhZGl1czogMyAvLyDpu5jorqQKCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIF90aGlzLnNjZW5lLmFkZChfdGhpcy5saW5lKTsKCiAgICAgICAgX3RoaXMuc2NlbmUuYWRkKF90aGlzLmxpbmUxKTsKCiAgICAgICAgdmFyIHNwZWVkID0gX3RoaXMuc3BlZWQ7CgogICAgICAgIGlmIChfdGhpcy50eXBlID09PSAicnVuIikgewogICAgICAgICAgX3RoaXMudGhpbmcgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzLmxpbmUubWF0ZXJpYWwudW5pZm9ybXMub2Zmc2V0LnZhbHVlLnggLT0gc3BlZWQ7CiAgICAgICAgICAgIF90aGlzLmxpbmUxLm1hdGVyaWFsLnVuaWZvcm1zLm9mZnNldC52YWx1ZS54IC09IHNwZWVkOwogICAgICAgICAgfSwgMzApOwogICAgICAgIH0gZWxzZSBpZiAoX3RoaXMudHlwZSA9PT0gInRvcCIpIHsKICAgICAgICAgIF90aGlzLnRoaW5nID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgICAgICBpZiAoX3RoaXMubGluZS5wb3NpdGlvbi55IDwgX3RoaXMubWF4aGVpZ2h0KSB7CiAgICAgICAgICAgICAgX3RoaXMubGluZS5wb3NpdGlvbi55ICs9IF90aGlzLnNwZWVkICogMTAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLmxpbmUucG9zaXRpb24ueSA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIDMwKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImNyZWF0ZUFuaW1hdGVMaW5lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVBbmltYXRlTGluZShvcHRpb24pIHsKICAgICAgdmFyIGN1cnZlOyAvLyDnlLHkuKTngrnkuYvpl7Tov57nur/miJDotJ3loZ7lsJTmm7Lnur8KCiAgICAgIHZhciBzcGhlcmVIZWlnaHRQb2ludHNBcmdzID0gb3B0aW9uLnNwaGVyZUhlaWdodFBvaW50c0FyZ3M7CiAgICAgIHZhciB2WCA9IChzcGhlcmVIZWlnaHRQb2ludHNBcmdzWzFdLnggKyBzcGhlcmVIZWlnaHRQb2ludHNBcmdzWzBdLngpIC8gMjsKICAgICAgdmFyIHZaID0gKHNwaGVyZUhlaWdodFBvaW50c0FyZ3NbMV0ueiArIHNwaGVyZUhlaWdodFBvaW50c0FyZ3NbMF0ueikgLyAyOwoKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gInJ1biIpIHsKICAgICAgICBjdXJ2ZSA9IG5ldyBUSFJFRS5DdWJpY0JlemllckN1cnZlMyhzcGhlcmVIZWlnaHRQb2ludHNBcmdzWzBdLCBuZXcgVEhSRUUuVmVjdG9yMyh2WCwgdGhpcy5oZWlnaHQsIHZaKSwgbmV3IFRIUkVFLlZlY3RvcjModlgsIHRoaXMuaGVpZ2h0LCB2WiksIHNwaGVyZUhlaWdodFBvaW50c0FyZ3NbMV0pOwogICAgICB9IGVsc2UgewogICAgICAgIGN1cnZlID0gbmV3IFRIUkVFLkN1YmljQmV6aWVyQ3VydmUzKHNwaGVyZUhlaWdodFBvaW50c0FyZ3NbMF0sIG5ldyBUSFJFRS5WZWN0b3IzKHZYLCB0aGlzLmhlaWdodCwgdlopLCBuZXcgVEhSRUUuVmVjdG9yMyh2WCwgdGhpcy5oZWlnaHQsIHZaKSwgc3BoZXJlSGVpZ2h0UG9pbnRzQXJnc1sxXSk7CiAgICAgIH0KCiAgICAgIHZhciBnZW8gPSBuZXcgVEhSRUUuR2VvbWV0cnkoKTsKICAgICAgZ2VvLnNldEZyb21Qb2ludHMoY3VydmUuZ2V0UG9pbnRzKDEwMCkpOyAvLyBjb25zdCBnZW8gPSBuZXcgR2VvbWV0cnkoKTsKICAgICAgLy8gZ2VvLnZlcnRpY2VzID0gb3B0aW9uLnNwaGVyZUhlaWdodFBvaW50c0FyZ3M7CgogICAgICB2YXIgbWVzaExpbmUgPSBuZXcgTWVzaExpbmUoKTsKICAgICAgbWVzaExpbmUuc2V0R2VvbWV0cnkoZ2VvKTsKICAgICAgcmV0dXJuIG5ldyBUSFJFRS5NZXNoKG1lc2hMaW5lLmdlb21ldHJ5LCBvcHRpb24ubWF0ZXJpYWwpOwogICAgfQogIH0sIHsKICAgIGtleTogImRlbGV0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZSgpIHsKICAgICAgaWYgKHRoaXMubGluZSkgewogICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMubGluZSk7CiAgICAgICAgdGhpcy5zY2VuZS5yZW1vdmUodGhpcy5saW5lMSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnRoaW5nKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRoaW5nKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFJ1bkxpbmU7Cn0oKTsKCmV4cG9ydCBkZWZhdWx0IFJ1bkxpbmU7"},{"version":3,"sources":["E:/图形开发/Projects/3d_City/src/components/js/RunLine.js"],"names":["THREE","MeshLine","MeshLineMaterial","Geometry","RunLine","option","img","lineWidth","side","FrontSide","camera","height","v0","Vector3","v1","speed","el","scene","type","maxheight","line","thing","creatline","textureLoader","TextureLoader","load","texture","anisotropy","wrapS","RepeatWrapping","wrapT","resolution","Vector2","offsetWidth","offsetHeight","material1","color","map","useMap","dashArray","dashRatio","dashOffset","transparent","sizeAttenuation","depthTest","blending","AdditiveBlending","near","far","createAnimateLine","kind","sphereHeightPointsArgs","material","number","radius","line1","add","setInterval","uniforms","offset","value","x","position","y","curve","vX","vZ","z","CubicBezierCurve3","geo","setFromPoints","getPoints","meshLine","setGeometry","Mesh","geometry","remove","clearInterval"],"mappings":"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","sourcesContent":["import * as THREE from \"three\";\nimport { MeshLine, MeshLineMaterial } from \"./THREE.MeshLine\";\nimport { Geometry } from \"three/examples/jsm/deprecated/Geometry\";\nTHREE.Geometry = Geometry;\n/**\n * 波纹散射图层\n * @param  options.img 照片地址\n * @param  options.lineWidth 线宽度\n * @param  options.side 贴图样式\n * @param  options.camera 相机\n * @param  options.height 高度\n * @param  options.v0 点一\n * @param  options.v1 点二\n * @param  options.speed 流动速度\n * @param  options.el 节目场景元素\n * @param  options.type 线类型分run和top\n * @param  options.maxheight 当类型为top时最高上升高度\n * @param  options.line 存储线\n * @param  options.thing 存储setInterval事件\n * @example\n */\nclass RunLine {\n  constructor(option) {\n    this.img = option.img || \"\";\n    this.lineWidth = option.lineWidth || 1;\n    this.side = option.side || THREE.FrontSide;\n    this.camera = option.camera || \"\";\n    this.height = option.height || 100;\n    this.v0 = option.v0 || new THREE.Vector3(0, 0, 0);\n    this.v1 = option.v1 || new THREE.Vector3(0, 0, 0);\n    this.speed = option.speed / 100 || 0.01;\n    this.el = option.el || \"\";\n    this.scene = option.scene || \"\";\n    this.type = option.type || \"run\";\n    this.maxheight = option.maxheight || 300;\n    this.line = \"\";\n    this.thing = \"\";\n    this.creatline();\n  }\n\n  creatline() {\n    const textureLoader = new THREE.TextureLoader();\n    textureLoader.load(this.img, (texture) => {\n      this.texture = texture;\n      this.texture.anisotropy = 16;\n      this.texture.wrapS = THREE.RepeatWrapping; // 每个都重复\n      this.texture.wrapT = THREE.RepeatWrapping;\n      const resolution = new THREE.Vector2(\n        this.el.offsetWidth,\n        this.el.offsetHeight\n      );\n      const material1 = new MeshLineMaterial({\n        color: \"\",\n        map: this.texture,\n        useMap: true,\n        lineWidth: this.lineWidth,\n        resolution,\n        dashArray: 0, // 破折号之间的长度和间距。(0 -无破折号)\n        dashRatio: 0.7, // 定义可见和不可见之间的比率(0 -更可见，1 -更不可见)。\n        dashOffset: 1,\n        transparent: true,\n        sizeAttenuation: 1, // 使线宽不变，不管距离(1个单位是屏幕上的1px)(0 -衰减，1 -不衰减)\n        side: THREE.FrontSide,\n        depthTest: false,\n        blending: THREE.AdditiveBlending,\n        near: this.camera.near,\n        far: this.camera.far,\n      });\n      this.line = this.createAnimateLine({\n        kind: \"sphere\", // 默认不填 为普通 ; 如为sphere,则表示球面建点\n        type: \"line\", // 默认不填 为MeshLine ; 如为pipe,则表示管道线\n        sphereHeightPointsArgs: [this.v0, this.v1],\n        material: material1,\n        number: 50,\n        radius: 3, // 默认\n      });\n      if (this.type === \"run\") {\n        this.line1 = this.createAnimateLine({\n          kind: \"sphere\", // 默认不填 为普通 ; 如为sphere,则表示球面建点\n          type: \"line\", // 默认不填 为MeshLine ; 如为pipe,则表示管道线\n          sphereHeightPointsArgs: [this.v0, this.v1],\n          material: material1,\n          number: 50,\n          radius: 3, // 默认\n        });\n      }\n\n      this.scene.add(this.line);\n      this.scene.add(this.line1);\n      const { speed } = this;\n      if (this.type === \"run\") {\n        this.thing = setInterval(() => {\n          this.line.material.uniforms.offset.value.x -= speed;\n          this.line1.material.uniforms.offset.value.x -= speed;\n        }, 30);\n      } else if (this.type === \"top\") {\n        this.thing = setInterval(() => {\n          if (this.line.position.y < this.maxheight) {\n            this.line.position.y += this.speed * 100;\n          } else {\n            this.line.position.y = 0;\n          }\n        }, 30);\n      }\n    });\n  }\n\n  createAnimateLine(option) {\n    let curve;\n\n    // 由两点之间连线成贝塞尔曲线\n    const { sphereHeightPointsArgs } = option;\n    const vX = (sphereHeightPointsArgs[1].x + sphereHeightPointsArgs[0].x) / 2;\n    const vZ = (sphereHeightPointsArgs[1].z + sphereHeightPointsArgs[0].z) / 2;\n    if (this.type === \"run\") {\n      curve = new THREE.CubicBezierCurve3(\n        sphereHeightPointsArgs[0],\n        new THREE.Vector3(vX, this.height, vZ),\n        new THREE.Vector3(vX, this.height, vZ),\n        sphereHeightPointsArgs[1]\n      );\n    } else {\n      curve = new THREE.CubicBezierCurve3(\n        sphereHeightPointsArgs[0],\n        new THREE.Vector3(vX, this.height, vZ),\n        new THREE.Vector3(vX, this.height, vZ),\n        sphereHeightPointsArgs[1]\n      );\n    }\n\n    const geo = new THREE.Geometry();\n    geo.setFromPoints(curve.getPoints(100));\n\n    // const geo = new Geometry();\n    // geo.vertices = option.sphereHeightPointsArgs;\n    const meshLine = new MeshLine();\n    meshLine.setGeometry(geo);\n    return new THREE.Mesh(meshLine.geometry, option.material);\n  }\n\n  delete() {\n    if (this.line) {\n      this.scene.remove(this.line);\n      this.scene.remove(this.line1);\n    }\n    if (this.thing) {\n      clearInterval(this.thing);\n    }\n  }\n}\n\nexport default RunLine;\n"]}]}