{"remainingRequest":"E:\\可视化工程\\Projects\\3d_City\\node_modules\\babel-loader\\lib\\index.js!E:\\可视化工程\\Projects\\3d_City\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\可视化工程\\Projects\\3d_City\\src\\components\\js\\THREE.MeshLine.js","dependencies":[{"path":"E:\\可视化工程\\Projects\\3d_City\\src\\components\\js\\THREE.MeshLine.js","mtime":1647503769000},{"path":"E:\\可视化工程\\Projects\\3d_City\\babel.config.js","mtime":1647503769000},{"path":"E:\\可视化工程\\Projects\\3d_City\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680804470900},{"path":"E:\\可视化工程\\Projects\\3d_City\\node_modules\\babel-loader\\lib\\index.js","mtime":1680804470891},{"path":"E:\\可视化工程\\Projects\\3d_City\\node_modules\\eslint-loader\\index.js","mtime":1680804481602}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF9vYmplY3RTcHJlYWQgPSByZXF1aXJlKCJFOlxcXHU1M0VGXHU4OUM2XHU1MzE2XHU1REU1XHU3QTBCXFxQcm9qZWN0c1xcM2RfQ2l0eVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXG9iamVjdFNwcmVhZDIuanMiKS5kZWZhdWx0OwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mbG9hdDMyLWFycmF5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5jb3B5LXdpdGhpbi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmV2ZXJ5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsbC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbHRlci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWluZGV4LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZm9yLWVhY2guanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pbmNsdWRlcy5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluZGV4LW9mLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaXRlcmF0b3IuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5qb2luLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubGFzdC1pbmRleC1vZi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5Lm1hcC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJlZHVjZS1yaWdodC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnJldmVyc2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zbGljZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvbWUuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zb3J0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc3ViYXJyYXkuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1sb2NhbGUtc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDE2LWFycmF5LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGVhdC5qcyIpOwoKLyogZXNsaW50LWRpc2FibGUgICovCgovKioKICogaHR0cHM6Ly9naXRodWIuY29tL3NwaXRlL1RIUkVFLk1lc2hMaW5lCiAqIOS/ruaUueWkh+azqO+8muWinuWKoHV25Yqo55S75Yqf6IO9CiAqLwooZnVuY3Rpb24gKCkgewogIHZhciByb290ID0gdGhpczsKICB2YXIgaGFzX3JlcXVpcmUgPSB0eXBlb2YgcmVxdWlyZSAhPT0gJ3VuZGVmaW5lZCc7CgogIHZhciBUSFJFRSA9IHJvb3QuVEhSRUUgfHwgaGFzX3JlcXVpcmUgJiYgcmVxdWlyZSgndGhyZWUnKTsKCiAgaWYgKCFUSFJFRSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdNZXNoTGluZSByZXF1aXJlcyB0aHJlZS5qcycpOwogIH0KCiAgZnVuY3Rpb24gTWVzaExpbmUoKSB7CiAgICB0aGlzLnBvc2l0aW9ucyA9IFtdOwogICAgdGhpcy5wcmV2aW91cyA9IFtdOwogICAgdGhpcy5uZXh0ID0gW107CiAgICB0aGlzLnNpZGUgPSBbXTsKICAgIHRoaXMud2lkdGggPSBbXTsKICAgIHRoaXMuaW5kaWNlc19hcnJheSA9IFtdOwogICAgdGhpcy51dnMgPSBbXTsKICAgIHRoaXMuY291bnRlcnMgPSBbXTsKICAgIHRoaXMuZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQnVmZmVyR2VvbWV0cnkoKTsKICAgIHRoaXMud2lkdGhDYWxsYmFjayA9IG51bGw7IC8vIFVzZWQgdG8gcmF5Y2FzdAoKICAgIHRoaXMubWF0cml4V29ybGQgPSBuZXcgVEhSRUUuTWF0cml4NCgpOwogIH0KCiAgTWVzaExpbmUucHJvdG90eXBlLnNldE1hdHJpeFdvcmxkID0gZnVuY3Rpb24gKG1hdHJpeFdvcmxkKSB7CiAgICB0aGlzLm1hdHJpeFdvcmxkID0gbWF0cml4V29ybGQ7CiAgfTsKCiAgTWVzaExpbmUucHJvdG90eXBlLnNldEdlb21ldHJ5ID0gZnVuY3Rpb24gKGcsIGMpIHsKICAgIHRoaXMud2lkdGhDYWxsYmFjayA9IGM7CiAgICB0aGlzLnBvc2l0aW9ucyA9IFtdOwogICAgdGhpcy5jb3VudGVycyA9IFtdOyAvLyBnLmNvbXB1dGVCb3VuZGluZ0JveCgpOwogICAgLy8gZy5jb21wdXRlQm91bmRpbmdTcGhlcmUoKTsKICAgIC8vIHNldCB0aGUgbm9ybWFscwogICAgLy8gZy5jb21wdXRlVmVydGV4Tm9ybWFscygpOwoKICAgIGlmIChnIGluc3RhbmNlb2YgVEhSRUUuR2VvbWV0cnkpIHsKICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBnLnZlcnRpY2VzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgdmFyIHYgPSBnLnZlcnRpY2VzW2pdOwogICAgICAgIHZhciBjID0gaiAvIGcudmVydGljZXMubGVuZ3RoOwogICAgICAgIHRoaXMucG9zaXRpb25zLnB1c2godi54LCB2LnksIHYueik7CiAgICAgICAgdGhpcy5wb3NpdGlvbnMucHVzaCh2LngsIHYueSwgdi56KTsKICAgICAgICB0aGlzLmNvdW50ZXJzLnB1c2goYyk7CiAgICAgICAgdGhpcy5jb3VudGVycy5wdXNoKGMpOwogICAgICB9CiAgICB9CgogICAgaWYgKGcgaW5zdGFuY2VvZiBUSFJFRS5CdWZmZXJHZW9tZXRyeSkgey8vIHJlYWQgYXR0cmlidXRlIHBvc2l0aW9ucyA/CiAgICB9CgogICAgaWYgKGcgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHwgZyBpbnN0YW5jZW9mIEFycmF5KSB7CiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZy5sZW5ndGg7IGogKz0gMykgewogICAgICAgIHZhciBjID0gaiAvIGcubGVuZ3RoOwogICAgICAgIHRoaXMucG9zaXRpb25zLnB1c2goZ1tqXSwgZ1tqICsgMV0sIGdbaiArIDJdKTsKICAgICAgICB0aGlzLnBvc2l0aW9ucy5wdXNoKGdbal0sIGdbaiArIDFdLCBnW2ogKyAyXSk7CiAgICAgICAgdGhpcy5jb3VudGVycy5wdXNoKGMpOwogICAgICAgIHRoaXMuY291bnRlcnMucHVzaChjKTsKICAgICAgfQogICAgfQoKICAgIHRoaXMucHJvY2VzcygpOwogIH07CgogIE1lc2hMaW5lLnByb3RvdHlwZS5yYXljYXN0ID0gZnVuY3Rpb24gKCkgewogICAgdmFyIGludmVyc2VNYXRyaXggPSBuZXcgVEhSRUUuTWF0cml4NCgpOwogICAgdmFyIHJheSA9IG5ldyBUSFJFRS5SYXkoKTsKICAgIHZhciBzcGhlcmUgPSBuZXcgVEhSRUUuU3BoZXJlKCk7CiAgICByZXR1cm4gZnVuY3Rpb24gcmF5Y2FzdChyYXljYXN0ZXIsIGludGVyc2VjdHMpIHsKICAgICAgdmFyIHByZWNpc2lvbiA9IHJheWNhc3Rlci5saW5lUHJlY2lzaW9uOwogICAgICB2YXIgcHJlY2lzaW9uU3EgPSBwcmVjaXNpb24gKiBwcmVjaXNpb247CiAgICAgIHZhciBpbnRlclJheSA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7CiAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7CiAgICAgIGlmIChnZW9tZXRyeS5ib3VuZGluZ1NwaGVyZSA9PT0gbnVsbCkgZ2VvbWV0cnkuY29tcHV0ZUJvdW5kaW5nU3BoZXJlKCk7IC8vIENoZWNraW5nIGJvdW5kaW5nU3BoZXJlIGRpc3RhbmNlIHRvIHJheQoKICAgICAgc3BoZXJlLmNvcHkoZ2VvbWV0cnkuYm91bmRpbmdTcGhlcmUpOwogICAgICBzcGhlcmUuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpOwoKICAgICAgaWYgKHJheWNhc3Rlci5yYXkuaW50ZXJzZWN0U3BoZXJlKHNwaGVyZSwgaW50ZXJSYXkpID09PSBmYWxzZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaW52ZXJzZU1hdHJpeC5nZXRJbnZlcnNlKHRoaXMubWF0cml4V29ybGQpOwogICAgICByYXkuY29weShyYXljYXN0ZXIucmF5KS5hcHBseU1hdHJpeDQoaW52ZXJzZU1hdHJpeCk7CiAgICAgIHZhciB2U3RhcnQgPSBuZXcgVEhSRUUuVmVjdG9yMygpOwogICAgICB2YXIgdkVuZCA9IG5ldyBUSFJFRS5WZWN0b3IzKCk7CiAgICAgIHZhciBpbnRlclNlZ21lbnQgPSBuZXcgVEhSRUUuVmVjdG9yMygpOwogICAgICB2YXIgc3RlcCA9IHRoaXMgaW5zdGFuY2VvZiBUSFJFRS5MaW5lU2VnbWVudHMgPyAyIDogMTsKCiAgICAgIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkJ1ZmZlckdlb21ldHJ5KSB7CiAgICAgICAgdmFyIGluZGV4ID0gZ2VvbWV0cnkuaW5kZXg7CiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzOwoKICAgICAgICBpZiAoaW5kZXggIT09IG51bGwpIHsKICAgICAgICAgIHZhciBpbmRpY2VzID0gaW5kZXguYXJyYXk7CiAgICAgICAgICB2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi5hcnJheTsKCiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGluZGljZXMubGVuZ3RoIC0gMTsgaSA8IGw7IGkgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgYSA9IGluZGljZXNbaV07CiAgICAgICAgICAgIHZhciBiID0gaW5kaWNlc1tpICsgMV07CiAgICAgICAgICAgIHZTdGFydC5mcm9tQXJyYXkocG9zaXRpb25zLCBhICogMyk7CiAgICAgICAgICAgIHZFbmQuZnJvbUFycmF5KHBvc2l0aW9ucywgYiAqIDMpOwogICAgICAgICAgICB2YXIgZGlzdFNxID0gcmF5LmRpc3RhbmNlU3FUb1NlZ21lbnQodlN0YXJ0LCB2RW5kLCBpbnRlclJheSwgaW50ZXJTZWdtZW50KTsKICAgICAgICAgICAgaWYgKGRpc3RTcSA+IHByZWNpc2lvblNxKSBjb250aW51ZTsKICAgICAgICAgICAgaW50ZXJSYXkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpOyAvLyBNb3ZlIGJhY2sgdG8gd29ybGQgc3BhY2UgZm9yIGRpc3RhbmNlIGNhbGN1bGF0aW9uCgogICAgICAgICAgICB2YXIgZGlzdGFuY2UgPSByYXljYXN0ZXIucmF5Lm9yaWdpbi5kaXN0YW5jZVRvKGludGVyUmF5KTsKICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmF5Y2FzdGVyLm5lYXIgfHwgZGlzdGFuY2UgPiByYXljYXN0ZXIuZmFyKSBjb250aW51ZTsKICAgICAgICAgICAgaW50ZXJzZWN0cy5wdXNoKHsKICAgICAgICAgICAgICBkaXN0YW5jZTogZGlzdGFuY2UsCiAgICAgICAgICAgICAgLy8gV2hhdCBkbyB3ZSB3YW50PyBpbnRlcnNlY3Rpb24gcG9pbnQgb24gdGhlIHJheSBvciBvbiB0aGUgc2VnbWVudD8/CiAgICAgICAgICAgICAgLy8gcG9pbnQ6IHJheWNhc3Rlci5yYXkuYXQoIGRpc3RhbmNlICksCiAgICAgICAgICAgICAgcG9pbnQ6IGludGVyU2VnbWVudC5jbG9uZSgpLmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKSwKICAgICAgICAgICAgICBpbmRleDogaSwKICAgICAgICAgICAgICBmYWNlOiBudWxsLAogICAgICAgICAgICAgIGZhY2VJbmRleDogbnVsbCwKICAgICAgICAgICAgICBvYmplY3Q6IHRoaXMKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBwb3NpdGlvbnMgPSBhdHRyaWJ1dGVzLnBvc2l0aW9uLmFycmF5OwoKICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcG9zaXRpb25zLmxlbmd0aCAvIDMgLSAxOyBpIDwgbDsgaSArPSBzdGVwKSB7CiAgICAgICAgICAgIHZTdGFydC5mcm9tQXJyYXkocG9zaXRpb25zLCAzICogaSk7CiAgICAgICAgICAgIHZFbmQuZnJvbUFycmF5KHBvc2l0aW9ucywgMyAqIGkgKyAzKTsKICAgICAgICAgICAgdmFyIGRpc3RTcSA9IHJheS5kaXN0YW5jZVNxVG9TZWdtZW50KHZTdGFydCwgdkVuZCwgaW50ZXJSYXksIGludGVyU2VnbWVudCk7CiAgICAgICAgICAgIGlmIChkaXN0U3EgPiBwcmVjaXNpb25TcSkgY29udGludWU7CiAgICAgICAgICAgIGludGVyUmF5LmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKTsgLy8gTW92ZSBiYWNrIHRvIHdvcmxkIHNwYWNlIGZvciBkaXN0YW5jZSBjYWxjdWxhdGlvbgoKICAgICAgICAgICAgdmFyIGRpc3RhbmNlID0gcmF5Y2FzdGVyLnJheS5vcmlnaW4uZGlzdGFuY2VUbyhpbnRlclJheSk7CiAgICAgICAgICAgIGlmIChkaXN0YW5jZSA8IHJheWNhc3Rlci5uZWFyIHx8IGRpc3RhbmNlID4gcmF5Y2FzdGVyLmZhcikgY29udGludWU7CiAgICAgICAgICAgIGludGVyc2VjdHMucHVzaCh7CiAgICAgICAgICAgICAgZGlzdGFuY2U6IGRpc3RhbmNlLAogICAgICAgICAgICAgIC8vIFdoYXQgZG8gd2Ugd2FudD8gaW50ZXJzZWN0aW9uIHBvaW50IG9uIHRoZSByYXkgb3Igb24gdGhlIHNlZ21lbnQ/PwogICAgICAgICAgICAgIC8vIHBvaW50OiByYXljYXN0ZXIucmF5LmF0KCBkaXN0YW5jZSApLAogICAgICAgICAgICAgIHBvaW50OiBpbnRlclNlZ21lbnQuY2xvbmUoKS5hcHBseU1hdHJpeDQodGhpcy5tYXRyaXhXb3JsZCksCiAgICAgICAgICAgICAgaW5kZXg6IGksCiAgICAgICAgICAgICAgZmFjZTogbnVsbCwKICAgICAgICAgICAgICBmYWNlSW5kZXg6IG51bGwsCiAgICAgICAgICAgICAgb2JqZWN0OiB0aGlzCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeSBpbnN0YW5jZW9mIFRIUkVFLkdlb21ldHJ5KSB7CiAgICAgICAgdmFyIHZlcnRpY2VzID0gZ2VvbWV0cnkudmVydGljZXM7CiAgICAgICAgdmFyIG5iVmVydGljZXMgPSB2ZXJ0aWNlcy5sZW5ndGg7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmJWZXJ0aWNlcyAtIDE7IGkgKz0gc3RlcCkgewogICAgICAgICAgdmFyIGRpc3RTcSA9IHJheS5kaXN0YW5jZVNxVG9TZWdtZW50KHZlcnRpY2VzW2ldLCB2ZXJ0aWNlc1tpICsgMV0sIGludGVyUmF5LCBpbnRlclNlZ21lbnQpOwogICAgICAgICAgaWYgKGRpc3RTcSA+IHByZWNpc2lvblNxKSBjb250aW51ZTsKICAgICAgICAgIGludGVyUmF5LmFwcGx5TWF0cml4NCh0aGlzLm1hdHJpeFdvcmxkKTsgLy8gTW92ZSBiYWNrIHRvIHdvcmxkIHNwYWNlIGZvciBkaXN0YW5jZSBjYWxjdWxhdGlvbgoKICAgICAgICAgIHZhciBkaXN0YW5jZSA9IHJheWNhc3Rlci5yYXkub3JpZ2luLmRpc3RhbmNlVG8oaW50ZXJSYXkpOwogICAgICAgICAgaWYgKGRpc3RhbmNlIDwgcmF5Y2FzdGVyLm5lYXIgfHwgZGlzdGFuY2UgPiByYXljYXN0ZXIuZmFyKSBjb250aW51ZTsKICAgICAgICAgIGludGVyc2VjdHMucHVzaCh7CiAgICAgICAgICAgIGRpc3RhbmNlOiBkaXN0YW5jZSwKICAgICAgICAgICAgLy8gV2hhdCBkbyB3ZSB3YW50PyBpbnRlcnNlY3Rpb24gcG9pbnQgb24gdGhlIHJheSBvciBvbiB0aGUgc2VnbWVudD8/CiAgICAgICAgICAgIC8vIHBvaW50OiByYXljYXN0ZXIucmF5LmF0KCBkaXN0YW5jZSApLAogICAgICAgICAgICBwb2ludDogaW50ZXJTZWdtZW50LmNsb25lKCkuYXBwbHlNYXRyaXg0KHRoaXMubWF0cml4V29ybGQpLAogICAgICAgICAgICBpbmRleDogaSwKICAgICAgICAgICAgZmFjZTogbnVsbCwKICAgICAgICAgICAgZmFjZUluZGV4OiBudWxsLAogICAgICAgICAgICBvYmplY3Q6IHRoaXMKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9KCk7CgogIE1lc2hMaW5lLnByb3RvdHlwZS5jb21wYXJlVjMgPSBmdW5jdGlvbiAoYSwgYikgewogICAgdmFyIGFhID0gYSAqIDY7CiAgICB2YXIgYWIgPSBiICogNjsKICAgIHJldHVybiB0aGlzLnBvc2l0aW9uc1thYV0gPT09IHRoaXMucG9zaXRpb25zW2FiXSAmJiB0aGlzLnBvc2l0aW9uc1thYSArIDFdID09PSB0aGlzLnBvc2l0aW9uc1thYiArIDFdICYmIHRoaXMucG9zaXRpb25zW2FhICsgMl0gPT09IHRoaXMucG9zaXRpb25zW2FiICsgMl07CiAgfTsKCiAgTWVzaExpbmUucHJvdG90eXBlLmNvcHlWMyA9IGZ1bmN0aW9uIChhKSB7CiAgICB2YXIgYWEgPSBhICogNjsKICAgIHJldHVybiBbdGhpcy5wb3NpdGlvbnNbYWFdLCB0aGlzLnBvc2l0aW9uc1thYSArIDFdLCB0aGlzLnBvc2l0aW9uc1thYSArIDJdXTsKICB9OwoKICBNZXNoTGluZS5wcm90b3R5cGUucHJvY2VzcyA9IGZ1bmN0aW9uICgpIHsKICAgIHZhciBsID0gdGhpcy5wb3NpdGlvbnMubGVuZ3RoIC8gNjsKICAgIHRoaXMucHJldmlvdXMgPSBbXTsKICAgIHRoaXMubmV4dCA9IFtdOwogICAgdGhpcy5zaWRlID0gW107CiAgICB0aGlzLndpZHRoID0gW107CiAgICB0aGlzLmluZGljZXNfYXJyYXkgPSBbXTsKICAgIHRoaXMudXZzID0gW107CgogICAgZm9yICh2YXIgaiA9IDA7IGogPCBsOyBqKyspIHsKICAgICAgdGhpcy5zaWRlLnB1c2goMSk7CiAgICAgIHRoaXMuc2lkZS5wdXNoKC0xKTsKICAgIH0KCiAgICB2YXIgdzsKCiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGw7IGorKykgewogICAgICBpZiAodGhpcy53aWR0aENhbGxiYWNrKSB3ID0gdGhpcy53aWR0aENhbGxiYWNrKGogLyAobCAtIDEpKTtlbHNlIHcgPSAxOwogICAgICB0aGlzLndpZHRoLnB1c2godyk7CiAgICAgIHRoaXMud2lkdGgucHVzaCh3KTsKICAgIH0KCiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGw7IGorKykgewogICAgICB0aGlzLnV2cy5wdXNoKGogLyAobCAtIDEpLCAwKTsKICAgICAgdGhpcy51dnMucHVzaChqIC8gKGwgLSAxKSwgMSk7CiAgICB9CgogICAgdmFyIHY7CgogICAgaWYgKHRoaXMuY29tcGFyZVYzKDAsIGwgLSAxKSkgewogICAgICB2ID0gdGhpcy5jb3B5VjMobCAtIDIpOwogICAgfSBlbHNlIHsKICAgICAgdiA9IHRoaXMuY29weVYzKDApOwogICAgfQoKICAgIHRoaXMucHJldmlvdXMucHVzaCh2WzBdLCB2WzFdLCB2WzJdKTsKICAgIHRoaXMucHJldmlvdXMucHVzaCh2WzBdLCB2WzFdLCB2WzJdKTsKCiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGwgLSAxOyBqKyspIHsKICAgICAgdiA9IHRoaXMuY29weVYzKGopOwogICAgICB0aGlzLnByZXZpb3VzLnB1c2godlswXSwgdlsxXSwgdlsyXSk7CiAgICAgIHRoaXMucHJldmlvdXMucHVzaCh2WzBdLCB2WzFdLCB2WzJdKTsKICAgIH0KCiAgICBmb3IgKHZhciBqID0gMTsgaiA8IGw7IGorKykgewogICAgICB2ID0gdGhpcy5jb3B5VjMoaik7CiAgICAgIHRoaXMubmV4dC5wdXNoKHZbMF0sIHZbMV0sIHZbMl0pOwogICAgICB0aGlzLm5leHQucHVzaCh2WzBdLCB2WzFdLCB2WzJdKTsKICAgIH0KCiAgICBpZiAodGhpcy5jb21wYXJlVjMobCAtIDEsIDApKSB7CiAgICAgIHYgPSB0aGlzLmNvcHlWMygxKTsKICAgIH0gZWxzZSB7CiAgICAgIHYgPSB0aGlzLmNvcHlWMyhsIC0gMSk7CiAgICB9CgogICAgdGhpcy5uZXh0LnB1c2godlswXSwgdlsxXSwgdlsyXSk7CiAgICB0aGlzLm5leHQucHVzaCh2WzBdLCB2WzFdLCB2WzJdKTsKCiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGwgLSAxOyBqKyspIHsKICAgICAgdmFyIG4gPSBqICogMjsKICAgICAgdGhpcy5pbmRpY2VzX2FycmF5LnB1c2gobiwgbiArIDEsIG4gKyAyKTsKICAgICAgdGhpcy5pbmRpY2VzX2FycmF5LnB1c2gobiArIDIsIG4gKyAxLCBuICsgMyk7CiAgICB9CgogICAgaWYgKCF0aGlzLmF0dHJpYnV0ZXMpIHsKICAgICAgdGhpcy5hdHRyaWJ1dGVzID0gewogICAgICAgIHBvc2l0aW9uOiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5wb3NpdGlvbnMpLCAzKSwKICAgICAgICBwcmV2aW91czogbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHRoaXMucHJldmlvdXMpLCAzKSwKICAgICAgICBuZXh0OiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5uZXh0KSwgMyksCiAgICAgICAgc2lkZTogbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgRmxvYXQzMkFycmF5KHRoaXMuc2lkZSksIDEpLAogICAgICAgIHdpZHRoOiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodGhpcy53aWR0aCksIDEpLAogICAgICAgIHV2OiBuZXcgVEhSRUUuQnVmZmVyQXR0cmlidXRlKG5ldyBGbG9hdDMyQXJyYXkodGhpcy51dnMpLCAyKSwKICAgICAgICBpbmRleDogbmV3IFRIUkVFLkJ1ZmZlckF0dHJpYnV0ZShuZXcgVWludDE2QXJyYXkodGhpcy5pbmRpY2VzX2FycmF5KSwgMSksCiAgICAgICAgY291bnRlcnM6IG5ldyBUSFJFRS5CdWZmZXJBdHRyaWJ1dGUobmV3IEZsb2F0MzJBcnJheSh0aGlzLmNvdW50ZXJzKSwgMSkKICAgICAgfTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5jb3B5QXJyYXkobmV3IEZsb2F0MzJBcnJheSh0aGlzLnBvc2l0aW9ucykpOwogICAgICB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmF0dHJpYnV0ZXMucHJldmlvdXMuY29weUFycmF5KG5ldyBGbG9hdDMyQXJyYXkodGhpcy5wcmV2aW91cykpOwogICAgICB0aGlzLmF0dHJpYnV0ZXMucHJldmlvdXMubmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmF0dHJpYnV0ZXMubmV4dC5jb3B5QXJyYXkobmV3IEZsb2F0MzJBcnJheSh0aGlzLm5leHQpKTsKICAgICAgdGhpcy5hdHRyaWJ1dGVzLm5leHQubmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmF0dHJpYnV0ZXMuc2lkZS5jb3B5QXJyYXkobmV3IEZsb2F0MzJBcnJheSh0aGlzLnNpZGUpKTsKICAgICAgdGhpcy5hdHRyaWJ1dGVzLnNpZGUubmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGguY29weUFycmF5KG5ldyBGbG9hdDMyQXJyYXkodGhpcy53aWR0aCkpOwogICAgICB0aGlzLmF0dHJpYnV0ZXMud2lkdGgubmVlZHNVcGRhdGUgPSB0cnVlOwogICAgICB0aGlzLmF0dHJpYnV0ZXMudXYuY29weUFycmF5KG5ldyBGbG9hdDMyQXJyYXkodGhpcy51dnMpKTsKICAgICAgdGhpcy5hdHRyaWJ1dGVzLnV2Lm5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgICAgdGhpcy5hdHRyaWJ1dGVzLmluZGV4LmNvcHlBcnJheShuZXcgVWludDE2QXJyYXkodGhpcy5pbmRpY2VzX2FycmF5KSk7CiAgICAgIHRoaXMuYXR0cmlidXRlcy5pbmRleC5uZWVkc1VwZGF0ZSA9IHRydWU7CiAgICB9IC8vIHRoaXMuZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAncG9zaXRpb24nLCB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24gKTsKICAgIC8vIHRoaXMuZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAncHJldmlvdXMnLCB0aGlzLmF0dHJpYnV0ZXMucHJldmlvdXMgKTsKICAgIC8vIHRoaXMuZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCAnbmV4dCcsIHRoaXMuYXR0cmlidXRlcy5uZXh0ICk7CiAgICAvLyB0aGlzLmdlb21ldHJ5LnNldEF0dHJpYnV0ZSggJ3NpZGUnLCB0aGlzLmF0dHJpYnV0ZXMuc2lkZSApOwogICAgLy8gdGhpcy5nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICd3aWR0aCcsIHRoaXMuYXR0cmlidXRlcy53aWR0aCApOwogICAgLy8gdGhpcy5nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICd1dicsIHRoaXMuYXR0cmlidXRlcy51diApOwogICAgLy8gdGhpcy5nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoICdjb3VudGVycycsIHRoaXMuYXR0cmlidXRlcy5jb3VudGVycyApOwoKCiAgICB0aGlzLmdlb21ldHJ5LnNldEF0dHJpYnV0ZSgncG9zaXRpb24nLCB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24pOwogICAgdGhpcy5nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3ByZXZpb3VzJywgdGhpcy5hdHRyaWJ1dGVzLnByZXZpb3VzKTsKICAgIHRoaXMuZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCduZXh0JywgdGhpcy5hdHRyaWJ1dGVzLm5leHQpOwogICAgdGhpcy5nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3NpZGUnLCB0aGlzLmF0dHJpYnV0ZXMuc2lkZSk7CiAgICB0aGlzLmdlb21ldHJ5LnNldEF0dHJpYnV0ZSgnd2lkdGgnLCB0aGlzLmF0dHJpYnV0ZXMud2lkdGgpOwogICAgdGhpcy5nZW9tZXRyeS5zZXRBdHRyaWJ1dGUoJ3V2JywgdGhpcy5hdHRyaWJ1dGVzLnV2KTsKICAgIHRoaXMuZ2VvbWV0cnkuc2V0QXR0cmlidXRlKCdjb3VudGVycycsIHRoaXMuYXR0cmlidXRlcy5jb3VudGVycyk7CiAgICB0aGlzLmdlb21ldHJ5LnNldEluZGV4KHRoaXMuYXR0cmlidXRlcy5pbmRleCk7CiAgfTsKCiAgZnVuY3Rpb24gbWVtY3B5KHNyYywgc3JjT2Zmc2V0LCBkc3QsIGRzdE9mZnNldCwgbGVuZ3RoKSB7CiAgICB2YXIgaTsKICAgIHNyYyA9IHNyYy5zdWJhcnJheSB8fCBzcmMuc2xpY2UgPyBzcmMgOiBzcmMuYnVmZmVyOwogICAgZHN0ID0gZHN0LnN1YmFycmF5IHx8IGRzdC5zbGljZSA/IGRzdCA6IGRzdC5idWZmZXI7CiAgICBzcmMgPSBzcmNPZmZzZXQgPyBzcmMuc3ViYXJyYXkgPyBzcmMuc3ViYXJyYXkoc3JjT2Zmc2V0LCBsZW5ndGggJiYgc3JjT2Zmc2V0ICsgbGVuZ3RoKSA6IHNyYy5zbGljZShzcmNPZmZzZXQsIGxlbmd0aCAmJiBzcmNPZmZzZXQgKyBsZW5ndGgpIDogc3JjOwoKICAgIGlmIChkc3Quc2V0KSB7CiAgICAgIGRzdC5zZXQoc3JjLCBkc3RPZmZzZXQpOwogICAgfSBlbHNlIHsKICAgICAgZm9yIChpID0gMDsgaSA8IHNyYy5sZW5ndGg7IGkrKykgewogICAgICAgIGRzdFtpICsgZHN0T2Zmc2V0XSA9IHNyY1tpXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBkc3Q7CiAgfQogIC8qKgogICAqIEZhc3QgbWV0aG9kIHRvIGFkdmFuY2UgdGhlIGxpbmUgYnkgb25lIHBvc2l0aW9uLiAgVGhlIG9sZGVzdCBwb3NpdGlvbiBpcyByZW1vdmVkLgogICAqIEBwYXJhbSBwb3NpdGlvbgogICAqLwoKCiAgTWVzaExpbmUucHJvdG90eXBlLmFkdmFuY2UgPSBmdW5jdGlvbiAocG9zaXRpb24pIHsKICAgIHZhciBwb3NpdGlvbnMgPSB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24uYXJyYXk7CiAgICB2YXIgcHJldmlvdXMgPSB0aGlzLmF0dHJpYnV0ZXMucHJldmlvdXMuYXJyYXk7CiAgICB2YXIgbmV4dCA9IHRoaXMuYXR0cmlidXRlcy5uZXh0LmFycmF5OwogICAgdmFyIGwgPSBwb3NpdGlvbnMubGVuZ3RoOyAvLyBQUkVWSU9VUwoKICAgIG1lbWNweShwb3NpdGlvbnMsIDAsIHByZXZpb3VzLCAwLCBsKTsgLy8gUE9TSVRJT05TCgogICAgbWVtY3B5KHBvc2l0aW9ucywgNiwgcG9zaXRpb25zLCAwLCBsIC0gNik7CiAgICBwb3NpdGlvbnNbbCAtIDZdID0gcG9zaXRpb24ueDsKICAgIHBvc2l0aW9uc1tsIC0gNV0gPSBwb3NpdGlvbi55OwogICAgcG9zaXRpb25zW2wgLSA0XSA9IHBvc2l0aW9uLno7CiAgICBwb3NpdGlvbnNbbCAtIDNdID0gcG9zaXRpb24ueDsKICAgIHBvc2l0aW9uc1tsIC0gMl0gPSBwb3NpdGlvbi55OwogICAgcG9zaXRpb25zW2wgLSAxXSA9IHBvc2l0aW9uLno7IC8vIE5FWFQKCiAgICBtZW1jcHkocG9zaXRpb25zLCA2LCBuZXh0LCAwLCBsIC0gNik7CiAgICBuZXh0W2wgLSA2XSA9IHBvc2l0aW9uLng7CiAgICBuZXh0W2wgLSA1XSA9IHBvc2l0aW9uLnk7CiAgICBuZXh0W2wgLSA0XSA9IHBvc2l0aW9uLno7CiAgICBuZXh0W2wgLSAzXSA9IHBvc2l0aW9uLng7CiAgICBuZXh0W2wgLSAyXSA9IHBvc2l0aW9uLnk7CiAgICBuZXh0W2wgLSAxXSA9IHBvc2l0aW9uLno7CiAgICB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24ubmVlZHNVcGRhdGUgPSB0cnVlOwogICAgdGhpcy5hdHRyaWJ1dGVzLnByZXZpb3VzLm5lZWRzVXBkYXRlID0gdHJ1ZTsKICAgIHRoaXMuYXR0cmlidXRlcy5uZXh0Lm5lZWRzVXBkYXRlID0gdHJ1ZTsKICB9OwoKICBUSFJFRS5TaGFkZXJDaHVuay5tZXNobGluZV92ZXJ0ID0gWycnLCBUSFJFRS5TaGFkZXJDaHVuay5sb2dkZXB0aGJ1Zl9wYXJzX3ZlcnRleCwgVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfdmVydGV4LCAnJywgJ2F0dHJpYnV0ZSB2ZWMzIHByZXZpb3VzOycsICdhdHRyaWJ1dGUgdmVjMyBuZXh0OycsICdhdHRyaWJ1dGUgZmxvYXQgc2lkZTsnLCAnYXR0cmlidXRlIGZsb2F0IHdpZHRoOycsICdhdHRyaWJ1dGUgZmxvYXQgY291bnRlcnM7JywgJycsICd1bmlmb3JtIHZlYzIgcmVzb2x1dGlvbjsnLCAndW5pZm9ybSBmbG9hdCBsaW5lV2lkdGg7JywgJ3VuaWZvcm0gdmVjMyBjb2xvcjsnLCAndW5pZm9ybSBmbG9hdCBvcGFjaXR5OycsICd1bmlmb3JtIGZsb2F0IG5lYXI7JywgJ3VuaWZvcm0gZmxvYXQgZmFyOycsICd1bmlmb3JtIGZsb2F0IHNpemVBdHRlbnVhdGlvbjsnLCAndW5pZm9ybSB2ZWMyIG9mZnNldDsnLCAnJywgJ3ZhcnlpbmcgdmVjMiB2VVY7JywgJ3ZhcnlpbmcgdmVjNCB2Q29sb3I7JywgJ3ZhcnlpbmcgZmxvYXQgdkNvdW50ZXJzOycsICcnLCAndmVjMiBmaXgoIHZlYzQgaSwgZmxvYXQgYXNwZWN0ICkgeycsICcnLCAnICAgIHZlYzIgcmVzID0gaS54eSAvIGkudzsnLCAnICAgIHJlcy54ICo9IGFzcGVjdDsnLCAnCSB2Q291bnRlcnMgPSBjb3VudGVyczsnLCAnICAgIHJldHVybiByZXM7JywgJycsICd9JywgJycsICd2b2lkIG1haW4oKSB7JywgJycsICcgICAgZmxvYXQgYXNwZWN0ID0gcmVzb2x1dGlvbi54IC8gcmVzb2x1dGlvbi55OycsICcgICAgZmxvYXQgcGl4ZWxXaWR0aFJhdGlvID0gMS4gLyAocmVzb2x1dGlvbi54ICogcHJvamVjdGlvbk1hdHJpeFswXVswXSk7JywgJycsICcgICAgdkNvbG9yID0gdmVjNCggY29sb3IsIG9wYWNpdHkgKTsnLCAnICAgIHZVViA9IHV2ICsgb2Zmc2V0OycsICcnLCAnICAgIG1hdDQgbSA9IHByb2plY3Rpb25NYXRyaXggKiBtb2RlbFZpZXdNYXRyaXg7JywgJyAgICB2ZWM0IGZpbmFsUG9zaXRpb24gPSBtICogdmVjNCggcG9zaXRpb24sIDEuMCApOycsICcgICAgdmVjNCBwcmV2UG9zID0gbSAqIHZlYzQoIHByZXZpb3VzLCAxLjAgKTsnLCAnICAgIHZlYzQgbmV4dFBvcyA9IG0gKiB2ZWM0KCBuZXh0LCAxLjAgKTsnLCAnJywgJyAgICB2ZWMyIGN1cnJlbnRQID0gZml4KCBmaW5hbFBvc2l0aW9uLCBhc3BlY3QgKTsnLCAnICAgIHZlYzIgcHJldlAgPSBmaXgoIHByZXZQb3MsIGFzcGVjdCApOycsICcgICAgdmVjMiBuZXh0UCA9IGZpeCggbmV4dFBvcywgYXNwZWN0ICk7JywgJycsICcgICAgZmxvYXQgcGl4ZWxXaWR0aCA9IGZpbmFsUG9zaXRpb24udyAqIHBpeGVsV2lkdGhSYXRpbzsnLCAnICAgIGZsb2F0IHcgPSAxLjggKiBwaXhlbFdpZHRoICogbGluZVdpZHRoICogd2lkdGg7JywgJycsICcgICAgaWYoIHNpemVBdHRlbnVhdGlvbiA9PSAxLiApIHsnLCAnICAgICAgICB3ID0gMS44ICogbGluZVdpZHRoICogd2lkdGg7JywgJyAgICB9JywgJycsICcgICAgdmVjMiBkaXI7JywgJyAgICBpZiggbmV4dFAgPT0gY3VycmVudFAgKSBkaXIgPSBub3JtYWxpemUoIGN1cnJlbnRQIC0gcHJldlAgKTsnLCAnICAgIGVsc2UgaWYoIHByZXZQID09IGN1cnJlbnRQICkgZGlyID0gbm9ybWFsaXplKCBuZXh0UCAtIGN1cnJlbnRQICk7JywgJyAgICBlbHNlIHsnLCAnICAgICAgICB2ZWMyIGRpcjEgPSBub3JtYWxpemUoIGN1cnJlbnRQIC0gcHJldlAgKTsnLCAnICAgICAgICB2ZWMyIGRpcjIgPSBub3JtYWxpemUoIG5leHRQIC0gY3VycmVudFAgKTsnLCAnICAgICAgICBkaXIgPSBub3JtYWxpemUoIGRpcjEgKyBkaXIyICk7JywgJycsICcgICAgICAgIHZlYzIgcGVycCA9IHZlYzIoIC1kaXIxLnksIGRpcjEueCApOycsICcgICAgICAgIHZlYzIgbWl0ZXIgPSB2ZWMyKCAtZGlyLnksIGRpci54ICk7JywgJyAgICAgICAgLy93ID0gY2xhbXAoIHcgLyBkb3QoIG1pdGVyLCBwZXJwICksIDAuLCA0LiAqIGxpbmVXaWR0aCAqIHdpZHRoICk7JywgJycsICcgICAgfScsICcnLCAnICAgIC8vdmVjMiBub3JtYWwgPSAoIGNyb3NzKCB2ZWMzKCBkaXIsIDAuICksIHZlYzMoIDAuLCAwLiwgMS4gKSApICkueHk7JywgJyAgICB2ZWMyIG5vcm1hbCA9IHZlYzIoIC1kaXIueSwgZGlyLnggKTsnLCAnICAgIG5vcm1hbC54IC89IGFzcGVjdDsnLCAnICAgIG5vcm1hbCAqPSAuNSAqIHc7JywgJycsICcgICAgdmVjNCBvZmZzZXQgPSB2ZWM0KCBub3JtYWwgKiBzaWRlLCAwLjAsIDEuMCApOycsICcgICAgZmluYWxQb3NpdGlvbi54eSArPSBvZmZzZXQueHk7JywgJycsICcgICAgZ2xfUG9zaXRpb24gPSBmaW5hbFBvc2l0aW9uOycsICcnLCBUSFJFRS5TaGFkZXJDaHVuay5sb2dkZXB0aGJ1Zl92ZXJ0ZXgsIFRIUkVFLlNoYWRlckNodW5rLmZvZ192ZXJ0ZXggJiYgJyAgICB2ZWM0IG12UG9zaXRpb24gPSBtb2RlbFZpZXdNYXRyaXggKiB2ZWM0KCBwb3NpdGlvbiwgMS4wICk7JywgVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3ZlcnRleCwgJ30nXS5qb2luKCdcclxuJyk7CiAgVEhSRUUuU2hhZGVyQ2h1bmsubWVzaGxpbmVfZnJhZyA9IFsnJywgVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX3BhcnNfZnJhZ21lbnQsIFRIUkVFLlNoYWRlckNodW5rLmxvZ2RlcHRoYnVmX3BhcnNfZnJhZ21lbnQsICcnLCAndW5pZm9ybSBzYW1wbGVyMkQgbWFwOycsICd1bmlmb3JtIHNhbXBsZXIyRCBhbHBoYU1hcDsnLCAndW5pZm9ybSBmbG9hdCB1c2VNYXA7JywgJ3VuaWZvcm0gZmxvYXQgdXNlQWxwaGFNYXA7JywgJ3VuaWZvcm0gZmxvYXQgdXNlRGFzaDsnLCAndW5pZm9ybSBmbG9hdCBkYXNoQXJyYXk7JywgJ3VuaWZvcm0gZmxvYXQgZGFzaE9mZnNldDsnLCAndW5pZm9ybSBmbG9hdCBkYXNoUmF0aW87JywgJ3VuaWZvcm0gZmxvYXQgdmlzaWJpbGl0eTsnLCAndW5pZm9ybSBmbG9hdCBhbHBoYVRlc3Q7JywgJ3VuaWZvcm0gdmVjMiByZXBlYXQ7JywgJycsICd2YXJ5aW5nIHZlYzIgdlVWOycsICd2YXJ5aW5nIHZlYzQgdkNvbG9yOycsICd2YXJ5aW5nIGZsb2F0IHZDb3VudGVyczsnLCAnJywgJ3ZvaWQgbWFpbigpIHsnLCAnJywgVEhSRUUuU2hhZGVyQ2h1bmsubG9nZGVwdGhidWZfZnJhZ21lbnQsICcnLCAnICAgIHZlYzQgYyA9IHZDb2xvcjsnLCAnICAgIGlmKCB1c2VNYXAgPT0gMS4gKSBjICo9IHRleHR1cmUyRCggbWFwLCB2VVYgKiByZXBlYXQgKTsnLCAnICAgIGlmKCB1c2VBbHBoYU1hcCA9PSAxLiApIGMuYSAqPSB0ZXh0dXJlMkQoIGFscGhhTWFwLCB2VVYgKiByZXBlYXQgKS5hOycsICcgICAgaWYoIGMuYSA8IGFscGhhVGVzdCApIGRpc2NhcmQ7JywgJyAgICBpZiggdXNlRGFzaCA9PSAxLiApeycsICcgICAgICAgIGMuYSAqPSBjZWlsKG1vZCh2Q291bnRlcnMgKyBkYXNoT2Zmc2V0LCBkYXNoQXJyYXkpIC0gKGRhc2hBcnJheSAqIGRhc2hSYXRpbykpOycsICcgICAgfScsICcgICAgZ2xfRnJhZ0NvbG9yID0gYzsnLCAnICAgIGdsX0ZyYWdDb2xvci5hICo9IHN0ZXAodkNvdW50ZXJzLCB2aXNpYmlsaXR5KTsnLCAnJywgVEhSRUUuU2hhZGVyQ2h1bmsuZm9nX2ZyYWdtZW50LCAnfSddLmpvaW4oJ1xyXG4nKTsKCiAgZnVuY3Rpb24gTWVzaExpbmVNYXRlcmlhbChwYXJhbWV0ZXJzKSB7CiAgICBUSFJFRS5TaGFkZXJNYXRlcmlhbC5jYWxsKHRoaXMsIHsKICAgICAgdW5pZm9ybXM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgVEhSRUUuVW5pZm9ybXNMaWIuZm9nKSwge30sIHsKICAgICAgICBsaW5lV2lkdGg6IHsKICAgICAgICAgIHZhbHVlOiAxCiAgICAgICAgfSwKICAgICAgICBtYXA6IHsKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfSwKICAgICAgICB1c2VNYXA6IHsKICAgICAgICAgIHZhbHVlOiAwCiAgICAgICAgfSwKICAgICAgICBhbHBoYU1hcDogewogICAgICAgICAgdmFsdWU6IG51bGwKICAgICAgICB9LAogICAgICAgIHVzZUFscGhhTWFwOiB7CiAgICAgICAgICB2YWx1ZTogMAogICAgICAgIH0sCiAgICAgICAgY29sb3I6IHsKICAgICAgICAgIHZhbHVlOiBuZXcgVEhSRUUuQ29sb3IoMHhmZmZmZmYpCiAgICAgICAgfSwKICAgICAgICBvcGFjaXR5OiB7CiAgICAgICAgICB2YWx1ZTogMQogICAgICAgIH0sCiAgICAgICAgcmVzb2x1dGlvbjogewogICAgICAgICAgdmFsdWU6IG5ldyBUSFJFRS5WZWN0b3IyKDEsIDEpCiAgICAgICAgfSwKICAgICAgICBzaXplQXR0ZW51YXRpb246IHsKICAgICAgICAgIHZhbHVlOiAxCiAgICAgICAgfSwKICAgICAgICBuZWFyOiB7CiAgICAgICAgICB2YWx1ZTogMQogICAgICAgIH0sCiAgICAgICAgZmFyOiB7CiAgICAgICAgICB2YWx1ZTogMQogICAgICAgIH0sCiAgICAgICAgZGFzaEFycmF5OiB7CiAgICAgICAgICB2YWx1ZTogMAogICAgICAgIH0sCiAgICAgICAgZGFzaE9mZnNldDogewogICAgICAgICAgdmFsdWU6IDAKICAgICAgICB9LAogICAgICAgIGRhc2hSYXRpbzogewogICAgICAgICAgdmFsdWU6IDAuNQogICAgICAgIH0sCiAgICAgICAgdXNlRGFzaDogewogICAgICAgICAgdmFsdWU6IDAKICAgICAgICB9LAogICAgICAgIHZpc2liaWxpdHk6IHsKICAgICAgICAgIHZhbHVlOiAxCiAgICAgICAgfSwKICAgICAgICBhbHBoYVRlc3Q6IHsKICAgICAgICAgIHZhbHVlOiAwCiAgICAgICAgfSwKICAgICAgICByZXBlYXQ6IHsKICAgICAgICAgIHZhbHVlOiBuZXcgVEhSRUUuVmVjdG9yMigxLCAxKQogICAgICAgIH0sCiAgICAgICAgb2Zmc2V0OiB7CiAgICAgICAgICB2YWx1ZTogbmV3IFRIUkVFLlZlY3RvcjIoMSwgMSkKICAgICAgICB9CiAgICAgIH0pLAogICAgICB2ZXJ0ZXhTaGFkZXI6IFRIUkVFLlNoYWRlckNodW5rLm1lc2hsaW5lX3ZlcnQsCiAgICAgIGZyYWdtZW50U2hhZGVyOiBUSFJFRS5TaGFkZXJDaHVuay5tZXNobGluZV9mcmFnCiAgICB9KTsKICAgIHRoaXMudHlwZSA9ICdNZXNoTGluZU1hdGVyaWFsJzsKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsKICAgICAgbGluZVdpZHRoOiB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmxpbmVXaWR0aC52YWx1ZTsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgICB0aGlzLnVuaWZvcm1zLmxpbmVXaWR0aC52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgbWFwOiB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLm1hcC52YWx1ZTsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgICB0aGlzLnVuaWZvcm1zLm1hcC52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdXNlTWFwOiB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnVzZU1hcC52YWx1ZTsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgICB0aGlzLnVuaWZvcm1zLnVzZU1hcC52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgYWxwaGFNYXA6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYWxwaGFNYXAudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy5hbHBoYU1hcC52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgdXNlQWxwaGFNYXA6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMudXNlQWxwaGFNYXAudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy51c2VBbHBoYU1hcC52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgY29sb3I6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuY29sb3IudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy5jb2xvci52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgb3BhY2l0eTogewogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5vcGFjaXR5LnZhbHVlOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgICAgIHRoaXMudW5pZm9ybXMub3BhY2l0eS52YWx1ZSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgcmVzb2x1dGlvbjogewogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5yZXNvbHV0aW9uLnZhbHVlOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgICAgIHRoaXMudW5pZm9ybXMucmVzb2x1dGlvbi52YWx1ZS5jb3B5KHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHNpemVBdHRlbnVhdGlvbjogewogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5zaXplQXR0ZW51YXRpb24udmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy5zaXplQXR0ZW51YXRpb24udmFsdWUgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG5lYXI6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMubmVhci52YWx1ZTsKICAgICAgICB9LAogICAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgICB0aGlzLnVuaWZvcm1zLm5lYXIudmFsdWUgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhcjogewogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5mYXIudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy5mYXIudmFsdWUgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGRhc2hBcnJheTogewogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy51bmlmb3Jtcy5kYXNoQXJyYXkudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy5kYXNoQXJyYXkudmFsdWUgPSB2YWx1ZTsKICAgICAgICAgIHRoaXMudXNlRGFzaCA9IHZhbHVlICE9PSAwID8gMSA6IDA7CiAgICAgICAgfQogICAgICB9LAogICAgICBkYXNoT2Zmc2V0OiB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLmRhc2hPZmZzZXQudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy5kYXNoT2Zmc2V0LnZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBkYXNoUmF0aW86IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuZGFzaFJhdGlvLnZhbHVlOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgICAgIHRoaXMudW5pZm9ybXMuZGFzaFJhdGlvLnZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9LAogICAgICB1c2VEYXNoOiB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnVzZURhc2gudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy51c2VEYXNoLnZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9LAogICAgICB2aXNpYmlsaXR5OiB7CiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLnVuaWZvcm1zLnZpc2liaWxpdHkudmFsdWU7CiAgICAgICAgfSwKICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWx1ZSkgewogICAgICAgICAgdGhpcy51bmlmb3Jtcy52aXNpYmlsaXR5LnZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9LAogICAgICBhbHBoYVRlc3Q6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMuYWxwaGFUZXN0LnZhbHVlOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgICAgIHRoaXMudW5pZm9ybXMuYWxwaGFUZXN0LnZhbHVlID0gdmFsdWU7CiAgICAgICAgfQogICAgICB9LAogICAgICByZXBlYXQ6IHsKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudW5pZm9ybXMucmVwZWF0LnZhbHVlOwogICAgICAgIH0sCiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsdWUpIHsKICAgICAgICAgIHRoaXMudW5pZm9ybXMucmVwZWF0LnZhbHVlLmNvcHkodmFsdWUpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICB0aGlzLnNldFZhbHVlcyhwYXJhbWV0ZXJzKTsKICB9CgogIE1lc2hMaW5lTWF0ZXJpYWwucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShUSFJFRS5TaGFkZXJNYXRlcmlhbC5wcm90b3R5cGUpOwogIE1lc2hMaW5lTWF0ZXJpYWwucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gTWVzaExpbmVNYXRlcmlhbDsKICBNZXNoTGluZU1hdGVyaWFsLnByb3RvdHlwZS5pc01lc2hMaW5lTWF0ZXJpYWwgPSB0cnVlOwoKICBNZXNoTGluZU1hdGVyaWFsLnByb3RvdHlwZS5jb3B5ID0gZnVuY3Rpb24gKHNvdXJjZSkgewogICAgVEhSRUUuU2hhZGVyTWF0ZXJpYWwucHJvdG90eXBlLmNvcHkuY2FsbCh0aGlzLCBzb3VyY2UpOwogICAgdGhpcy5saW5lV2lkdGggPSBzb3VyY2UubGluZVdpZHRoOwogICAgdGhpcy5tYXAgPSBzb3VyY2UubWFwOwogICAgdGhpcy51c2VNYXAgPSBzb3VyY2UudXNlTWFwOwogICAgdGhpcy5hbHBoYU1hcCA9IHNvdXJjZS5hbHBoYU1hcDsKICAgIHRoaXMudXNlQWxwaGFNYXAgPSBzb3VyY2UudXNlQWxwaGFNYXA7CiAgICB0aGlzLmNvbG9yLmNvcHkoc291cmNlLmNvbG9yKTsKICAgIHRoaXMub3BhY2l0eSA9IHNvdXJjZS5vcGFjaXR5OwogICAgdGhpcy5yZXNvbHV0aW9uLmNvcHkoc291cmNlLnJlc29sdXRpb24pOwogICAgdGhpcy5zaXplQXR0ZW51YXRpb24gPSBzb3VyY2Uuc2l6ZUF0dGVudWF0aW9uOwogICAgdGhpcy5uZWFyID0gc291cmNlLm5lYXI7CiAgICB0aGlzLmZhciA9IHNvdXJjZS5mYXI7CiAgICB0aGlzLmRhc2hBcnJheS5jb3B5KHNvdXJjZS5kYXNoQXJyYXkpOwogICAgdGhpcy5kYXNoT2Zmc2V0LmNvcHkoc291cmNlLmRhc2hPZmZzZXQpOwogICAgdGhpcy5kYXNoUmF0aW8uY29weShzb3VyY2UuZGFzaFJhdGlvKTsKICAgIHRoaXMudXNlRGFzaCA9IHNvdXJjZS51c2VEYXNoOwogICAgdGhpcy52aXNpYmlsaXR5ID0gc291cmNlLnZpc2liaWxpdHk7CiAgICB0aGlzLmFscGhhVGVzdCA9IHNvdXJjZS5hbHBoYVRlc3Q7CiAgICB0aGlzLnJlcGVhdC5jb3B5KHNvdXJjZS5yZXBlYXQpOwogICAgcmV0dXJuIHRoaXM7CiAgfTsKCiAgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykgewogICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzKSB7CiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHsKICAgICAgICBNZXNoTGluZTogTWVzaExpbmUsCiAgICAgICAgTWVzaExpbmVNYXRlcmlhbDogTWVzaExpbmVNYXRlcmlhbAogICAgICB9OwogICAgfQoKICAgIGV4cG9ydHMuTWVzaExpbmUgPSBNZXNoTGluZTsKICAgIGV4cG9ydHMuTWVzaExpbmVNYXRlcmlhbCA9IE1lc2hMaW5lTWF0ZXJpYWw7CiAgfSBlbHNlIHsKICAgIHJvb3QuTWVzaExpbmUgPSBNZXNoTGluZTsKICAgIHJvb3QuTWVzaExpbmVNYXRlcmlhbCA9IE1lc2hMaW5lTWF0ZXJpYWw7CiAgfQp9KS5jYWxsKHRoaXMpOw=="},{"version":3,"sources":["E:/可视化工程/Projects/3d_City/src/components/js/THREE.MeshLine.js"],"names":["root","has_require","require","THREE","Error","MeshLine","positions","previous","next","side","width","indices_array","uvs","counters","geometry","BufferGeometry","widthCallback","matrixWorld","Matrix4","prototype","setMatrixWorld","setGeometry","g","c","Geometry","j","vertices","length","v","push","x","y","z","Float32Array","Array","process","raycast","inverseMatrix","ray","Ray","sphere","Sphere","raycaster","intersects","precision","linePrecision","precisionSq","interRay","Vector3","boundingSphere","computeBoundingSphere","copy","applyMatrix4","intersectSphere","getInverse","vStart","vEnd","interSegment","step","LineSegments","index","attributes","indices","array","position","i","l","a","b","fromArray","distSq","distanceSqToSegment","distance","origin","distanceTo","near","far","point","clone","face","faceIndex","object","nbVertices","compareV3","aa","ab","copyV3","w","n","BufferAttribute","uv","Uint16Array","copyArray","needsUpdate","setAttribute","setIndex","memcpy","src","srcOffset","dst","dstOffset","subarray","slice","buffer","set","advance","ShaderChunk","meshline_vert","logdepthbuf_pars_vertex","fog_pars_vertex","logdepthbuf_vertex","fog_vertex","join","meshline_frag","fog_pars_fragment","logdepthbuf_pars_fragment","logdepthbuf_fragment","fog_fragment","MeshLineMaterial","parameters","ShaderMaterial","call","uniforms","UniformsLib","fog","lineWidth","value","map","useMap","alphaMap","useAlphaMap","color","Color","opacity","resolution","Vector2","sizeAttenuation","dashArray","dashOffset","dashRatio","useDash","visibility","alphaTest","repeat","offset","vertexShader","fragmentShader","type","Object","defineProperties","enumerable","get","setValues","create","constructor","isMeshLineMaterial","source","exports","module"],"mappings":"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","sourcesContent":["/* eslint-disable  */\n/**\n * https://github.com/spite/THREE.MeshLine\n * 修改备注：增加uv动画功能\n */\n(function () {\n  const root = this;\n\n  const has_require = typeof require !== 'undefined';\n\n  const THREE = root.THREE || has_require && require('three');\n  if (!THREE) { throw new Error('MeshLine requires three.js'); }\n\n  function MeshLine() {\n    this.positions = [];\n\n    this.previous = [];\n    this.next = [];\n    this.side = [];\n    this.width = [];\n    this.indices_array = [];\n    this.uvs = [];\n    this.counters = [];\n    this.geometry = new THREE.BufferGeometry();\n\n    this.widthCallback = null;\n\n    // Used to raycast\n    this.matrixWorld = new THREE.Matrix4();\n  }\n\n  MeshLine.prototype.setMatrixWorld = function (matrixWorld) {\n    this.matrixWorld = matrixWorld;\n  };\n\n  MeshLine.prototype.setGeometry = function (g, c) {\n    this.widthCallback = c;\n\n    this.positions = [];\n    this.counters = [];\n    // g.computeBoundingBox();\n    // g.computeBoundingSphere();\n\n    // set the normals\n    // g.computeVertexNormals();\n    if (g instanceof THREE.Geometry) {\n      for (var j = 0; j < g.vertices.length; j++) {\n        const v = g.vertices[j];\n        var c = j / g.vertices.length;\n        this.positions.push(v.x, v.y, v.z);\n        this.positions.push(v.x, v.y, v.z);\n        this.counters.push(c);\n        this.counters.push(c);\n      }\n    }\n\n    if (g instanceof THREE.BufferGeometry) {\n      // read attribute positions ?\n    }\n\n    if (g instanceof Float32Array || g instanceof Array) {\n      for (var j = 0; j < g.length; j += 3) {\n        var c = j / g.length;\n        this.positions.push(g[j], g[j + 1], g[j + 2]);\n        this.positions.push(g[j], g[j + 1], g[j + 2]);\n        this.counters.push(c);\n        this.counters.push(c);\n      }\n    }\n\n    this.process();\n  };\n\n  MeshLine.prototype.raycast = (function () {\n    const inverseMatrix = new THREE.Matrix4();\n    const ray = new THREE.Ray();\n    const sphere = new THREE.Sphere();\n\n    return function raycast(raycaster, intersects) {\n      const precision = raycaster.linePrecision;\n      const precisionSq = precision * precision;\n      const interRay = new THREE.Vector3();\n\n      const { geometry } = this;\n\n      if (geometry.boundingSphere === null) geometry.computeBoundingSphere();\n\n      // Checking boundingSphere distance to ray\n\n      sphere.copy(geometry.boundingSphere);\n      sphere.applyMatrix4(this.matrixWorld);\n\n      if (raycaster.ray.intersectSphere(sphere, interRay) === false) {\n        return;\n      }\n\n      inverseMatrix.getInverse(this.matrixWorld);\n      ray.copy(raycaster.ray).applyMatrix4(inverseMatrix);\n\n      const vStart = new THREE.Vector3();\n      const vEnd = new THREE.Vector3();\n      const interSegment = new THREE.Vector3();\n      const step = this instanceof THREE.LineSegments ? 2 : 1;\n\n      if (geometry instanceof THREE.BufferGeometry) {\n        const { index } = geometry;\n        const { attributes } = geometry;\n\n        if (index !== null) {\n          const indices = index.array;\n          var positions = attributes.position.array;\n\n          for (var i = 0, l = indices.length - 1; i < l; i += step) {\n            const a = indices[i];\n            const b = indices[i + 1];\n\n            vStart.fromArray(positions, a * 3);\n            vEnd.fromArray(positions, b * 3);\n\n            var distSq = ray.distanceSqToSegment(vStart, vEnd, interRay, interSegment);\n\n            if (distSq > precisionSq) continue;\n\n            interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n\n            var distance = raycaster.ray.origin.distanceTo(interRay);\n\n            if (distance < raycaster.near || distance > raycaster.far) continue;\n\n            intersects.push({\n\n              distance,\n              // What do we want? intersection point on the ray or on the segment??\n              // point: raycaster.ray.at( distance ),\n              point: interSegment.clone().applyMatrix4(this.matrixWorld),\n              index: i,\n              face: null,\n              faceIndex: null,\n              object: this,\n\n            });\n          }\n        } else {\n          var positions = attributes.position.array;\n\n          for (var i = 0, l = positions.length / 3 - 1; i < l; i += step) {\n            vStart.fromArray(positions, 3 * i);\n            vEnd.fromArray(positions, 3 * i + 3);\n\n            var distSq = ray.distanceSqToSegment(vStart, vEnd, interRay, interSegment);\n\n            if (distSq > precisionSq) continue;\n\n            interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n\n            var distance = raycaster.ray.origin.distanceTo(interRay);\n\n            if (distance < raycaster.near || distance > raycaster.far) continue;\n\n            intersects.push({\n\n              distance,\n              // What do we want? intersection point on the ray or on the segment??\n              // point: raycaster.ray.at( distance ),\n              point: interSegment.clone().applyMatrix4(this.matrixWorld),\n              index: i,\n              face: null,\n              faceIndex: null,\n              object: this,\n\n            });\n          }\n        }\n      } else if (geometry instanceof THREE.Geometry) {\n        const { vertices } = geometry;\n        const nbVertices = vertices.length;\n\n        for (var i = 0; i < nbVertices - 1; i += step) {\n          var distSq = ray.distanceSqToSegment(vertices[i], vertices[i + 1], interRay, interSegment);\n\n          if (distSq > precisionSq) continue;\n\n          interRay.applyMatrix4(this.matrixWorld); // Move back to world space for distance calculation\n\n          var distance = raycaster.ray.origin.distanceTo(interRay);\n\n          if (distance < raycaster.near || distance > raycaster.far) continue;\n\n          intersects.push({\n\n            distance,\n            // What do we want? intersection point on the ray or on the segment??\n            // point: raycaster.ray.at( distance ),\n            point: interSegment.clone().applyMatrix4(this.matrixWorld),\n            index: i,\n            face: null,\n            faceIndex: null,\n            object: this,\n\n          });\n        }\n      }\n    };\n  }());\n\n  MeshLine.prototype.compareV3 = function (a, b) {\n    const aa = a * 6;\n    const ab = b * 6;\n    return (this.positions[aa] === this.positions[ab]) && (this.positions[aa + 1] === this.positions[ab + 1]) && (this.positions[aa + 2] === this.positions[ab + 2]);\n  };\n\n  MeshLine.prototype.copyV3 = function (a) {\n    const aa = a * 6;\n    return [this.positions[aa], this.positions[aa + 1], this.positions[aa + 2]];\n  };\n\n  MeshLine.prototype.process = function () {\n    const l = this.positions.length / 6;\n\n    this.previous = [];\n    this.next = [];\n    this.side = [];\n    this.width = [];\n    this.indices_array = [];\n    this.uvs = [];\n\n    for (var j = 0; j < l; j++) {\n      this.side.push(1);\n      this.side.push(-1);\n    }\n\n    let w;\n    for (var j = 0; j < l; j++) {\n      if (this.widthCallback) w = this.widthCallback(j / (l - 1));\n      else w = 1;\n      this.width.push(w);\n      this.width.push(w);\n    }\n\n    for (var j = 0; j < l; j++) {\n      this.uvs.push(j / (l - 1), 0);\n      this.uvs.push(j / (l - 1), 1);\n    }\n\n    let v;\n\n    if (this.compareV3(0, l - 1)) {\n      v = this.copyV3(l - 2);\n    } else {\n      v = this.copyV3(0);\n    }\n    this.previous.push(v[0], v[1], v[2]);\n    this.previous.push(v[0], v[1], v[2]);\n    for (var j = 0; j < l - 1; j++) {\n      v = this.copyV3(j);\n      this.previous.push(v[0], v[1], v[2]);\n      this.previous.push(v[0], v[1], v[2]);\n    }\n\n    for (var j = 1; j < l; j++) {\n      v = this.copyV3(j);\n      this.next.push(v[0], v[1], v[2]);\n      this.next.push(v[0], v[1], v[2]);\n    }\n\n    if (this.compareV3(l - 1, 0)) {\n      v = this.copyV3(1);\n    } else {\n      v = this.copyV3(l - 1);\n    }\n    this.next.push(v[0], v[1], v[2]);\n    this.next.push(v[0], v[1], v[2]);\n\n    for (var j = 0; j < l - 1; j++) {\n      const n = j * 2;\n      this.indices_array.push(n, n + 1, n + 2);\n      this.indices_array.push(n + 2, n + 1, n + 3);\n    }\n\n    if (!this.attributes) {\n      this.attributes = {\n        position: new THREE.BufferAttribute(new Float32Array(this.positions), 3),\n        previous: new THREE.BufferAttribute(new Float32Array(this.previous), 3),\n        next: new THREE.BufferAttribute(new Float32Array(this.next), 3),\n        side: new THREE.BufferAttribute(new Float32Array(this.side), 1),\n        width: new THREE.BufferAttribute(new Float32Array(this.width), 1),\n        uv: new THREE.BufferAttribute(new Float32Array(this.uvs), 2),\n        index: new THREE.BufferAttribute(new Uint16Array(this.indices_array), 1),\n        counters: new THREE.BufferAttribute(new Float32Array(this.counters), 1),\n      };\n    } else {\n      this.attributes.position.copyArray(new Float32Array(this.positions));\n      this.attributes.position.needsUpdate = true;\n      this.attributes.previous.copyArray(new Float32Array(this.previous));\n      this.attributes.previous.needsUpdate = true;\n      this.attributes.next.copyArray(new Float32Array(this.next));\n      this.attributes.next.needsUpdate = true;\n      this.attributes.side.copyArray(new Float32Array(this.side));\n      this.attributes.side.needsUpdate = true;\n      this.attributes.width.copyArray(new Float32Array(this.width));\n      this.attributes.width.needsUpdate = true;\n      this.attributes.uv.copyArray(new Float32Array(this.uvs));\n      this.attributes.uv.needsUpdate = true;\n      this.attributes.index.copyArray(new Uint16Array(this.indices_array));\n      this.attributes.index.needsUpdate = true;\n    }\n\n    // this.geometry.setAttribute( 'position', this.attributes.position );\n    // this.geometry.setAttribute( 'previous', this.attributes.previous );\n    // this.geometry.setAttribute( 'next', this.attributes.next );\n    // this.geometry.setAttribute( 'side', this.attributes.side );\n    // this.geometry.setAttribute( 'width', this.attributes.width );\n    // this.geometry.setAttribute( 'uv', this.attributes.uv );\n    // this.geometry.setAttribute( 'counters', this.attributes.counters );\n\n    this.geometry.setAttribute('position', this.attributes.position);\n    this.geometry.setAttribute('previous', this.attributes.previous);\n    this.geometry.setAttribute('next', this.attributes.next);\n    this.geometry.setAttribute('side', this.attributes.side);\n    this.geometry.setAttribute('width', this.attributes.width);\n    this.geometry.setAttribute('uv', this.attributes.uv);\n    this.geometry.setAttribute('counters', this.attributes.counters);\n\n    this.geometry.setIndex(this.attributes.index);\n  };\n\n  function memcpy(src, srcOffset, dst, dstOffset, length) {\n    let i;\n\n    src = src.subarray || src.slice ? src : src.buffer;\n    dst = dst.subarray || dst.slice ? dst : dst.buffer;\n\n    src = srcOffset ? src.subarray\n      ? src.subarray(srcOffset, length && srcOffset + length)\n      : src.slice(srcOffset, length && srcOffset + length) : src;\n\n    if (dst.set) {\n      dst.set(src, dstOffset);\n    } else {\n      for (i = 0; i < src.length; i++) {\n        dst[i + dstOffset] = src[i];\n      }\n    }\n\n    return dst;\n  }\n\n  /**\n   * Fast method to advance the line by one position.  The oldest position is removed.\n   * @param position\n   */\n  MeshLine.prototype.advance = function (position) {\n    const positions = this.attributes.position.array;\n    const previous = this.attributes.previous.array;\n    const next = this.attributes.next.array;\n    const l = positions.length;\n\n    // PREVIOUS\n    memcpy(positions, 0, previous, 0, l);\n\n    // POSITIONS\n    memcpy(positions, 6, positions, 0, l - 6);\n\n    positions[l - 6] = position.x;\n    positions[l - 5] = position.y;\n    positions[l - 4] = position.z;\n    positions[l - 3] = position.x;\n    positions[l - 2] = position.y;\n    positions[l - 1] = position.z;\n\n    // NEXT\n    memcpy(positions, 6, next, 0, l - 6);\n\n    next[l - 6] = position.x;\n    next[l - 5] = position.y;\n    next[l - 4] = position.z;\n    next[l - 3] = position.x;\n    next[l - 2] = position.y;\n    next[l - 1] = position.z;\n\n    this.attributes.position.needsUpdate = true;\n    this.attributes.previous.needsUpdate = true;\n    this.attributes.next.needsUpdate = true;\n  };\n\n  THREE.ShaderChunk.meshline_vert = [\n    '',\n    THREE.ShaderChunk.logdepthbuf_pars_vertex,\n    THREE.ShaderChunk.fog_pars_vertex,\n    '',\n    'attribute vec3 previous;',\n    'attribute vec3 next;',\n    'attribute float side;',\n    'attribute float width;',\n    'attribute float counters;',\n    '',\n    'uniform vec2 resolution;',\n    'uniform float lineWidth;',\n    'uniform vec3 color;',\n    'uniform float opacity;',\n    'uniform float near;',\n    'uniform float far;',\n    'uniform float sizeAttenuation;',\n    'uniform vec2 offset;',\n    '',\n    'varying vec2 vUV;',\n    'varying vec4 vColor;',\n    'varying float vCounters;',\n    '',\n    'vec2 fix( vec4 i, float aspect ) {',\n    '',\n    '    vec2 res = i.xy / i.w;',\n    '    res.x *= aspect;',\n    '\t vCounters = counters;',\n    '    return res;',\n    '',\n    '}',\n    '',\n    'void main() {',\n    '',\n    '    float aspect = resolution.x / resolution.y;',\n    '    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);',\n    '',\n    '    vColor = vec4( color, opacity );',\n    '    vUV = uv + offset;',\n    '',\n    '    mat4 m = projectionMatrix * modelViewMatrix;',\n    '    vec4 finalPosition = m * vec4( position, 1.0 );',\n    '    vec4 prevPos = m * vec4( previous, 1.0 );',\n    '    vec4 nextPos = m * vec4( next, 1.0 );',\n    '',\n    '    vec2 currentP = fix( finalPosition, aspect );',\n    '    vec2 prevP = fix( prevPos, aspect );',\n    '    vec2 nextP = fix( nextPos, aspect );',\n    '',\n    '    float pixelWidth = finalPosition.w * pixelWidthRatio;',\n    '    float w = 1.8 * pixelWidth * lineWidth * width;',\n    '',\n    '    if( sizeAttenuation == 1. ) {',\n    '        w = 1.8 * lineWidth * width;',\n    '    }',\n    '',\n    '    vec2 dir;',\n    '    if( nextP == currentP ) dir = normalize( currentP - prevP );',\n    '    else if( prevP == currentP ) dir = normalize( nextP - currentP );',\n    '    else {',\n    '        vec2 dir1 = normalize( currentP - prevP );',\n    '        vec2 dir2 = normalize( nextP - currentP );',\n    '        dir = normalize( dir1 + dir2 );',\n    '',\n    '        vec2 perp = vec2( -dir1.y, dir1.x );',\n    '        vec2 miter = vec2( -dir.y, dir.x );',\n    '        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );',\n    '',\n    '    }',\n    '',\n    '    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;',\n    '    vec2 normal = vec2( -dir.y, dir.x );',\n    '    normal.x /= aspect;',\n    '    normal *= .5 * w;',\n    '',\n    '    vec4 offset = vec4( normal * side, 0.0, 1.0 );',\n    '    finalPosition.xy += offset.xy;',\n    '',\n    '    gl_Position = finalPosition;',\n    '',\n    THREE.ShaderChunk.logdepthbuf_vertex,\n    THREE.ShaderChunk.fog_vertex && '    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );',\n    THREE.ShaderChunk.fog_vertex,\n    '}',\n  ].join('\\r\\n');\n\n  THREE.ShaderChunk.meshline_frag = [\n    '',\n    THREE.ShaderChunk.fog_pars_fragment,\n    THREE.ShaderChunk.logdepthbuf_pars_fragment,\n    '',\n    'uniform sampler2D map;',\n    'uniform sampler2D alphaMap;',\n    'uniform float useMap;',\n    'uniform float useAlphaMap;',\n    'uniform float useDash;',\n    'uniform float dashArray;',\n    'uniform float dashOffset;',\n    'uniform float dashRatio;',\n    'uniform float visibility;',\n    'uniform float alphaTest;',\n    'uniform vec2 repeat;',\n    '',\n    'varying vec2 vUV;',\n    'varying vec4 vColor;',\n    'varying float vCounters;',\n    '',\n    'void main() {',\n    '',\n    THREE.ShaderChunk.logdepthbuf_fragment,\n    '',\n    '    vec4 c = vColor;',\n    '    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );',\n    '    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;',\n    '    if( c.a < alphaTest ) discard;',\n    '    if( useDash == 1. ){',\n    '        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));',\n    '    }',\n    '    gl_FragColor = c;',\n    '    gl_FragColor.a *= step(vCounters, visibility);',\n    '',\n    THREE.ShaderChunk.fog_fragment,\n    '}',\n  ].join('\\r\\n');\n\n  function MeshLineMaterial(parameters) {\n    THREE.ShaderMaterial.call(this, {\n      uniforms: {\n        ...THREE.UniformsLib.fog,\n        lineWidth: { value: 1 },\n        map: { value: null },\n        useMap: { value: 0 },\n        alphaMap: { value: null },\n        useAlphaMap: { value: 0 },\n        color: { value: new THREE.Color(0xffffff) },\n        opacity: { value: 1 },\n        resolution: { value: new THREE.Vector2(1, 1) },\n        sizeAttenuation: { value: 1 },\n        near: { value: 1 },\n        far: { value: 1 },\n        dashArray: { value: 0 },\n        dashOffset: { value: 0 },\n        dashRatio: { value: 0.5 },\n        useDash: { value: 0 },\n        visibility: { value: 1 },\n        alphaTest: { value: 0 },\n        repeat: { value: new THREE.Vector2(1, 1) },\n        offset: { value: new THREE.Vector2(1, 1) },\n      },\n\n      vertexShader: THREE.ShaderChunk.meshline_vert,\n\n      fragmentShader: THREE.ShaderChunk.meshline_frag,\n\n    });\n\n    this.type = 'MeshLineMaterial';\n\n    Object.defineProperties(this, {\n      lineWidth: {\n        enumerable: true,\n        get() {\n          return this.uniforms.lineWidth.value;\n        },\n        set(value) {\n          this.uniforms.lineWidth.value = value;\n        },\n      },\n      map: {\n        enumerable: true,\n        get() {\n          return this.uniforms.map.value;\n        },\n        set(value) {\n          this.uniforms.map.value = value;\n        },\n      },\n      useMap: {\n        enumerable: true,\n        get() {\n          return this.uniforms.useMap.value;\n        },\n        set(value) {\n          this.uniforms.useMap.value = value;\n        },\n      },\n      alphaMap: {\n        enumerable: true,\n        get() {\n          return this.uniforms.alphaMap.value;\n        },\n        set(value) {\n          this.uniforms.alphaMap.value = value;\n        },\n      },\n      useAlphaMap: {\n        enumerable: true,\n        get() {\n          return this.uniforms.useAlphaMap.value;\n        },\n        set(value) {\n          this.uniforms.useAlphaMap.value = value;\n        },\n      },\n      color: {\n        enumerable: true,\n        get() {\n          return this.uniforms.color.value;\n        },\n        set(value) {\n          this.uniforms.color.value = value;\n        },\n      },\n      opacity: {\n        enumerable: true,\n        get() {\n          return this.uniforms.opacity.value;\n        },\n        set(value) {\n          this.uniforms.opacity.value = value;\n        },\n      },\n      resolution: {\n        enumerable: true,\n        get() {\n          return this.uniforms.resolution.value;\n        },\n        set(value) {\n          this.uniforms.resolution.value.copy(value);\n        },\n      },\n      sizeAttenuation: {\n        enumerable: true,\n        get() {\n          return this.uniforms.sizeAttenuation.value;\n        },\n        set(value) {\n          this.uniforms.sizeAttenuation.value = value;\n        },\n      },\n      near: {\n        enumerable: true,\n        get() {\n          return this.uniforms.near.value;\n        },\n        set(value) {\n          this.uniforms.near.value = value;\n        },\n      },\n      far: {\n        enumerable: true,\n        get() {\n          return this.uniforms.far.value;\n        },\n        set(value) {\n          this.uniforms.far.value = value;\n        },\n      },\n      dashArray: {\n        enumerable: true,\n        get() {\n          return this.uniforms.dashArray.value;\n        },\n        set(value) {\n          this.uniforms.dashArray.value = value;\n          this.useDash = (value !== 0) ? 1 : 0;\n        },\n      },\n      dashOffset: {\n        enumerable: true,\n        get() {\n          return this.uniforms.dashOffset.value;\n        },\n        set(value) {\n          this.uniforms.dashOffset.value = value;\n        },\n      },\n      dashRatio: {\n        enumerable: true,\n        get() {\n          return this.uniforms.dashRatio.value;\n        },\n        set(value) {\n          this.uniforms.dashRatio.value = value;\n        },\n      },\n      useDash: {\n        enumerable: true,\n        get() {\n          return this.uniforms.useDash.value;\n        },\n        set(value) {\n          this.uniforms.useDash.value = value;\n        },\n      },\n      visibility: {\n        enumerable: true,\n        get() {\n          return this.uniforms.visibility.value;\n        },\n        set(value) {\n          this.uniforms.visibility.value = value;\n        },\n      },\n      alphaTest: {\n        enumerable: true,\n        get() {\n          return this.uniforms.alphaTest.value;\n        },\n        set(value) {\n          this.uniforms.alphaTest.value = value;\n        },\n      },\n      repeat: {\n        enumerable: true,\n        get() {\n          return this.uniforms.repeat.value;\n        },\n        set(value) {\n          this.uniforms.repeat.value.copy(value);\n        },\n      },\n    });\n\n    this.setValues(parameters);\n  }\n\n  MeshLineMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype);\n  MeshLineMaterial.prototype.constructor = MeshLineMaterial;\n  MeshLineMaterial.prototype.isMeshLineMaterial = true;\n\n  MeshLineMaterial.prototype.copy = function (source) {\n    THREE.ShaderMaterial.prototype.copy.call(this, source);\n\n    this.lineWidth = source.lineWidth;\n    this.map = source.map;\n    this.useMap = source.useMap;\n    this.alphaMap = source.alphaMap;\n    this.useAlphaMap = source.useAlphaMap;\n    this.color.copy(source.color);\n    this.opacity = source.opacity;\n    this.resolution.copy(source.resolution);\n    this.sizeAttenuation = source.sizeAttenuation;\n    this.near = source.near;\n    this.far = source.far;\n    this.dashArray.copy(source.dashArray);\n    this.dashOffset.copy(source.dashOffset);\n    this.dashRatio.copy(source.dashRatio);\n    this.useDash = source.useDash;\n    this.visibility = source.visibility;\n    this.alphaTest = source.alphaTest;\n    this.repeat.copy(source.repeat);\n\n    return this;\n  };\n\n  if (typeof exports !== 'undefined') {\n    if (typeof module !== 'undefined' && module.exports) {\n      exports = module.exports = { MeshLine, MeshLineMaterial };\n    }\n    exports.MeshLine = MeshLine;\n    exports.MeshLineMaterial = MeshLineMaterial;\n  } else {\n    root.MeshLine = MeshLine;\n    root.MeshLineMaterial = MeshLineMaterial;\n  }\n}).call(this);\n"]}]}