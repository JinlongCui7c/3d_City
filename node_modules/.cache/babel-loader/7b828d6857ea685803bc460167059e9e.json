{"remainingRequest":"E:\\图形开发\\Projects\\3d_City\\node_modules\\babel-loader\\lib\\index.js!E:\\图形开发\\Projects\\3d_City\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\图形开发\\Projects\\3d_City\\src\\components\\js\\RunRing.js","dependencies":[{"path":"E:\\图形开发\\Projects\\3d_City\\src\\components\\js\\RunRing.js","mtime":1647503769000},{"path":"E:\\图形开发\\Projects\\3d_City\\babel.config.js","mtime":1647503769000},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\图形开发\\Projects\\3d_City\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJFOlxcXHU1NkZFXHU1RjYyXHU1RjAwXHU1M0QxXFxQcm9qZWN0c1xcM2RfQ2l0eVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkU6XFxcdTU2RkVcdTVGNjJcdTVGMDBcdTUzRDFcXFByb2plY3RzXFwzZF9DaXR5XFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxjcmVhdGVDbGFzcy5qcyI7CgovKiBlc2xpbnQtZGlzYWJsZSAqLwppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSc7Ci8qKg0KICog5rOi57q55pWj5bCE5Zu+5bGCDQogKiBAcGFyYW0gIG9wdGlvbnMuaW1nIOeFp+eJh+WcsOWdgA0KICogQHBhcmFtICBvcHRpb25zLnNwZWVkIOa1geWKqOmAn+W6pg0KICogQHBhcmFtICBvcHRpb25zLnNjZW5lIHRocmVl5Zy65pmvDQogKiBAcGFyYW0gIG9wdGlvbnMucmFkaXVzIOWchueahOWNiuW+hA0KICogQHBhcmFtICBvcHRpb25zLnRoaW5nIOWchueahOS9jee9rg0KICogQHBhcmFtICBvcHRpb25zLm1lc2hyaW5ncyDlrZjlgqjlnIblvaLmlbDmja4NCiAqIEBleGFtcGxlDQogKi8KCnZhciBSdW5SaW5nID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBSdW5SaW5nKG9wdGlvbikgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJ1blJpbmcpOwoKICAgIHRoaXMuaW1nID0gb3B0aW9uLmltZyB8fCAnJzsKICAgIHRoaXMuc3BlZWQgPSBvcHRpb24uc3BlZWQgLyAxMDAgfHwgMC4wMTsKICAgIHRoaXMuc2NlbmUgPSBvcHRpb24uc2NlbmU7CiAgICB0aGlzLnJhZGl1cyA9IG9wdGlvbi5yYWRpdXMgfHwgMTAwOwogICAgdGhpcy5wb3NpdGlvbiA9IG9wdGlvbi5wb3NpdGlvbiB8fCBbMCwgMCwgMF07CiAgICB0aGlzLm1lc2hyaW5ncyA9IFtdOwogICAgdGhpcy5DcmVhdFJpbmcoKTsKICB9CgogIF9jcmVhdGVDbGFzcyhSdW5SaW5nLCBbewogICAga2V5OiAiQ3JlYXRSaW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBDcmVhdFJpbmcoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAvL+WIm+W7uuWvueixoeivu+WPlueFp+eJh+e6ueeQhgogICAgICB2YXIgdGV4dHVyZUxvYWRlciA9IG5ldyBUSFJFRS5UZXh0dXJlTG9hZGVyKCk7CiAgICAgIHRleHR1cmVMb2FkZXIubG9hZCh0aGlzLmltZywgZnVuY3Rpb24gKHRleHR1cmUpIHsKICAgICAgICAvL+WIm+W7uuWchuWciOe7k+aehAogICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBUSFJFRS5SaW5nR2VvbWV0cnkoMCwgX3RoaXMucmFkaXVzLCA1MDApOyAvL+WIm+W7uuadkOi0qCDmioror7vlj5bliLDnmoTlm77niYfotYvnu5nmnZDotKgKCiAgICAgICAgdmFyIG1hdGVyaWFsMiA9IG5ldyBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCh7CiAgICAgICAgICBjb2xvcjogMHhmZmZmZmYsCiAgICAgICAgICBzaWRlOiBUSFJFRS5Eb3VibGVTaWRlLAogICAgICAgICAgZGVwdGhUZXN0OiB0cnVlLAogICAgICAgICAgYmxlbmRpbmc6IFRIUkVFLkFkZGl0aXZlQmxlbmRpbmcsCiAgICAgICAgICBtYXA6IHRleHR1cmUKICAgICAgICB9KTsgLy/kvKDlhaXnmoTlpJrngrnnmoTor53nlJ/miJDlpJrkuKrmqKHlnosKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfdGhpcy5wb3NpdGlvbi5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgLy/nu4TlkIjnlJ/miJDmqKHlnosKICAgICAgICAgIF90aGlzLm1lc2hyaW5nID0gbmV3IFRIUkVFLk1lc2goZ2VvbWV0cnksIG1hdGVyaWFsMik7IC8v6K6+572u5qih5Z6L55qEWOi9tOWBj+enu+mHj++8jOiuqeaooeWei+W5s+mTuuWGjVjpnaLkuIoKCiAgICAgICAgICBfdGhpcy5tZXNocmluZy5yb3RhdGVYKE1hdGguUEkgLyAyKTsgLy/orr7nva7liJ3lp4vnirbmgIHmqKHlnovnvKnmlL7mr5TkvosKCgogICAgICAgICAgX3RoaXMubWVzaHJpbmcuc2NhbGUuc2V0KDAuMSwgMC4xLCAwLjEpOyAvL+iuvue9ruaooeWei+S9jee9rgoKCiAgICAgICAgICBfdGhpcy5tZXNocmluZy5wb3NpdGlvbi5zZXQoX3RoaXMucG9zaXRpb25baV1bMF0sIF90aGlzLnBvc2l0aW9uW2ldWzFdLCBfdGhpcy5wb3NpdGlvbltpXVsyXSk7IC8v5YKo5a2Y5qih5Z6L5a+56LGh77yM55So5LqOcmVuZGVy5pS55Y+Y5bGe5oCn5ZKM6ZSA5q+B5a+56LGhCgoKICAgICAgICAgIF90aGlzLm1lc2hyaW5ncy5wdXNoKF90aGlzLm1lc2hyaW5nKTsgLy/mt7vliqDliLDlnLrmma/ph4zpnaIKCgogICAgICAgICAgX3RoaXMuc2NlbmUuYWRkKF90aGlzLm1lc2hyaW5nc1tpXSk7CiAgICAgICAgfQogICAgICB9KTsgLy/liJvlu7pyZW5kZXLvvIzmr4/kuIDluKfov5vooYzmqKHlnovmlLnlj5gKCiAgICAgIHRoaXMudGhpbmcgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgLy/lvqrnjq/miYDmnInliJvlu7rnmoTmqKHlnovvvIzov5vooYzmlLnlj5gKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IF90aGlzLnBvc2l0aW9uLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICAvL+WmguaenOaooeWei+W3sue7j+WIm+W7ugogICAgICAgICAgaWYgKF90aGlzLm1lc2hyaW5nc1tpXSkgewogICAgICAgICAgICAvL+W9k+aooeWei+e8qeaUvuavlOS+i+Wwj+S6jjHnmoTml7blgJnvvIzmqKHlnovov5vooYzmlL7lpKcKICAgICAgICAgICAgaWYgKF90aGlzLm1lc2hyaW5nc1tpXS5zY2FsZS54IDwgMSkgewogICAgICAgICAgICAgIF90aGlzLm1lc2hyaW5nc1tpXS5zY2FsZS5zZXQoX3RoaXMubWVzaHJpbmdzW2ldLnNjYWxlLnggKyAwLjAxLCBfdGhpcy5tZXNocmluZ3NbaV0uc2NhbGUueCArIDAuMDEsIF90aGlzLm1lc2hyaW5nc1tpXS5zY2FsZS54ICsgMC4wMSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy/lvZPmqKHlnovmr5TkvovlpKfkuo4x55qE5pe25YCZ77yM5qih5Z6L6YeN572uCiAgICAgICAgICAgICAgX3RoaXMubWVzaHJpbmdzW2ldLnNjYWxlLnNldCgwLjEsIDAuMSwgMC4xKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgNTApOwogICAgfQogIH0sIHsKICAgIGtleTogImRlbGV0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGV0ZSgpIHsKICAgICAgLy/liKDpmaRzY2VuZeS4reWvueW6lOeahOaooeWeiwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMucG9zaXRpb24ubGVuZ3RoOyBpICs9IDEpIHsKICAgICAgICBpZiAodGhpcy5tZXNocmluZ3NbaV0pIHsKICAgICAgICAgIHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMubWVzaHJpbmdzW2ldKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnRoaW5nKSB7CiAgICAgICAgLy/muIXpmaRyZW5kZXLkuovku7YKICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGhpbmcpOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gUnVuUmluZzsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgUnVuUmluZzs="},{"version":3,"sources":["E:/图形开发/Projects/3d_City/src/components/js/RunRing.js"],"names":["THREE","RunRing","option","img","speed","scene","radius","position","meshrings","CreatRing","textureLoader","TextureLoader","load","texture","geometry","RingGeometry","material2","MeshBasicMaterial","color","side","DoubleSide","depthTest","blending","AdditiveBlending","map","i","length","meshring","Mesh","rotateX","Math","PI","scale","set","push","add","thing","setInterval","x","remove","clearInterval"],"mappings":"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","sourcesContent":["/* eslint-disable */\r\nimport * as THREE from 'three';\r\n/**\r\n * 波纹散射图层\r\n * @param  options.img 照片地址\r\n * @param  options.speed 流动速度\r\n * @param  options.scene three场景\r\n * @param  options.radius 圆的半径\r\n * @param  options.thing 圆的位置\r\n * @param  options.meshrings 存储圆形数据\r\n * @example\r\n */\r\n\r\nclass RunRing {\r\n  constructor(option) {\r\n    this.img = option.img || '';\r\n    this.speed = option.speed / 100 || 0.01;\r\n    this.scene = option.scene;\r\n    this.radius = option.radius || 100;\r\n    this.position = option.position || [0, 0, 0];\r\n    this.meshrings = [];\r\n    this.CreatRing();\r\n  }\r\n  CreatRing() {\r\n    //创建对象读取照片纹理\r\n    const textureLoader = new THREE.TextureLoader();\r\n    textureLoader.load(this.img, (texture) => {\r\n      //创建圆圈结构\r\n      const geometry = new THREE.RingGeometry(0, this.radius, 500);\r\n      //创建材质 把读取到的图片赋给材质\r\n      const material2 = new THREE.MeshBasicMaterial({\r\n        color: 0xffffff,\r\n        side: THREE.DoubleSide,\r\n        depthTest: true,\r\n        blending: THREE.AdditiveBlending,\r\n        map: texture,\r\n      });\r\n      //传入的多点的话生成多个模型\r\n      for (let i = 0; i < this.position.length; i += 1) {\r\n        //组合生成模型\r\n        this.meshring = new THREE.Mesh(geometry, material2);\r\n        //设置模型的X轴偏移量，让模型平铺再X面上\r\n        this.meshring.rotateX(Math.PI / 2);\r\n        //设置初始状态模型缩放比例\r\n        this.meshring.scale.set(0.1, 0.1, 0.1);\r\n        //设置模型位置\r\n        this.meshring.position.set(this.position[i][0], this.position[i][1], this.position[i][2]);\r\n        //储存模型对象，用于render改变属性和销毁对象\r\n        this.meshrings.push(this.meshring)\r\n        //添加到场景里面\r\n        this.scene.add(this.meshrings[i]);\r\n\r\n      }\r\n\r\n\r\n    });\r\n    //创建render，每一帧进行模型改变\r\n    this.thing = setInterval(() => {\r\n      //循环所有创建的模型，进行改变\r\n      for (let i = 0; i < this.position.length; i += 1) {\r\n        //如果模型已经创建\r\n        if (this.meshrings[i]) {\r\n          //当模型缩放比例小于1的时候，模型进行放大\r\n          if (this.meshrings[i].scale.x < 1) {\r\n            this.meshrings[i].scale.set(\r\n              this.meshrings[i].scale.x + 0.01,\r\n              this.meshrings[i].scale.x + 0.01,\r\n              this.meshrings[i].scale.x + 0.01,\r\n            );\r\n          } else {\r\n            //当模型比例大于1的时候，模型重置\r\n            this.meshrings[i].scale.set(0.1, 0.1, 0.1);\r\n          }\r\n        }\r\n      }\r\n\r\n    }, 50);\r\n\r\n  }\r\n  delete() {\r\n    //删除scene中对应的模型\r\n    for (let i = 0; i < this.position.length; i += 1) {\r\n      if (this.meshrings[i]) {\r\n        this.scene.remove(this.meshrings[i]);\r\n      }\r\n    }\r\n    if (this.thing) {\r\n      //清除render事件\r\n      clearInterval(this.thing);\r\n    }\r\n  }\r\n}\r\nexport default RunRing;"]}]}